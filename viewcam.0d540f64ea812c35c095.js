/*! VERSION | 10.93.1 */"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[5254],{62962:(e,t,i)=>{i.d(t,{W:()=>a});let a=(0,i(98846).n7)({resolved:{},chunkName:()=>"ModelChat",isReady(e){let t=this.resolve(e);return!0===this.resolved[t]&&!!i.m[t]},importAsync:()=>Promise.resolve().then(i.bind(i,65827)),requireAsync(e){let t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then(e=>(this.resolved[t]=!0,e))},requireSync(e){return i(this.resolve(e))},resolve:()=>65827})},48233:(e,t,i)=>{i.d(t,{Z:()=>C});var a=i(27378),s=i(48204),r=i(99382),l=i(29413),n=i(43806),o=i(3034),c=i(99973),d=i(99748),u=i(97606),m=i(80176),p=i(7685),h=i(63256),v=i(243),E=i(97986),g=i(29421);let S={routerPush:m.J5,requestPrivate:E.zG},C=(0,s.$j)(e=>({offlinePrivateProposal:(0,h.Y52)(e),isViewCamPage:(0,v.mT)(e),proposeError:(0,g.Nh)(e),isProposeLoading:(0,g.sh)(e)}),S)(e=>{var t;let{trans:i}=(0,u.QT)(),[s,m]=(0,a.useState)(!1),{className:h,model:v,offlinePrivateProposal:E,isViewCamPage:g,proposeError:S,isProposeLoading:C}=e,b=(0,p.L)("request-private-button-");(0,a.useEffect)(()=>{m(!!(null==E?void 0:E.declined))},[E]);let f=E&&!s&&v.id===(null==E?void 0:null===(t=E.model)||void 0===t?void 0:t.id),T="request-private-button";return a.createElement(a.Fragment,null,!!E&&a.createElement(o.Z,{isMobileRelative:!1,indentation:4,placement:"bottom",targetId:b},i(f?"viewCamStatuses.offline.requestPrivate.alreadyRequestedPrivateOfTheModel":"viewCamStatuses.offline.requestPrivate.alreadyRequestingPrivateFromAnotherModel")),a.createElement("div",{id:b,className:(0,d.AK)("request-private-button",h,{"request-private-button--with-timer":f})},!!S&&a.createElement(o.Z,{isMobileRelative:!1,indentation:4,placement:"top",targetId:T,isForceVisible:!0},i("viewCamStatuses.offline.requestPrivate.alreadyRequestingPrivateFromAnotherUser")),a.createElement("span",{id:T},a.createElement(r.ZP,{onClick:()=>{if(g){e.requestPrivate(v.id);return}e.routerPush(`/${v.username}`)},disabled:!!E||!!S,loading:C},f?a.createElement("div",{className:"request-private-button__timer"},a.createElement(l.Z,{img:"clock",size:16}),a.createElement(n.Z,{maxTime:c.ht,endTime:E.expiresAt,onTimeEnd:()=>{m(!0)}})):a.createElement(a.Fragment,null,a.createElement(l.Z,{img:"flash"}),i("viewCamStatuses.offline.requestPrivate.button"))))))})},29409:(e,t,i)=>{i.d(t,{r:()=>r});var a=i(27378),s=i(98655);let r=(0,i(98846).n7)({resolved:{},chunkName:()=>"TicketShowConfirmationModal",isReady(e){let t=this.resolve(e);return!0===this.resolved[t]&&!!i.m[t]},importAsync:()=>i.e(3742).then(i.bind(i,70143)),requireAsync(e){let t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then(e=>(this.resolved[t]=!0,e))},requireSync(e){return i(this.resolve(e))},resolve:()=>70143},{ssr:!1,fallback:a.createElement(s.c,null)})},99992:(e,t,i)=>{i.d(t,{L:()=>a});let a=(0,i(98846).n7)({resolved:{},chunkName:()=>"SendTipButton",isReady(e){let t=this.resolve(e);return!0===this.resolved[t]&&!!i.m[t]},importAsync:()=>i.e(7714).then(i.bind(i,14860)),requireAsync(e){let t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then(e=>(this.resolved[t]=!0,e))},requireSync(e){return i(this.resolve(e))},resolve:()=>14860})},48361:(e,t,i)=>{i.d(t,{Z:()=>J});var a=i(27378),s=i(48204),r=i(3620),l=i(6035),n=i(98568),o=i(77382),c=i(97554),d=i(52345),u=i(16040),m=i(1948),p=i(61395),h=i(65101),v=i(29413),E=i(91090),g=i(86811),S=i(7914),C=i(99748),b=i(97606),f=i(80176),T=i(20717),y=i(94380),w=i(58543),P=i(63256),N=i(243),_=i(62203),k=i(60673),A=i(39783),I=i(74012),M=i(17723),R=i(82512),L=i(66483),O=i(32284),U=i(97986),Z=i(4289),B=i(72914),V=i(88051),D=i(87489);let F=({onClick:e,model:t,modelUsername:i,isMediaPage:s})=>{let r=(0,D.n3)(t);return a.createElement(Z.rU,{key:i,to:`/${i}/profile`,onClick:e,className:"viewcam-profile-menu-item"},a.createElement(V.Z,{className:"viewcam-profile-menu-item__avatar",onlineStatusClassName:"viewcam-profile-menu-item__online-status",user:t?(0,O.T$)(t):{username:i},modelData:r,showOnlineStatus:!0,isBorderAvatar:!0}),a.createElement(B.f,{className:"viewcam-profile-menu-item__label",as:s?"span":"h1",fallback:"span"},i,a.createElement(v.Z,{className:"viewcam-profile-menu-item__icon media-up-to-m-hidden",img:"next",size:9})))};var W=i(79561),$=i(29421),x=i(61435);let H={createFreeAccountModal:U.cS,showModal:o.K4,routerReplace:f.sb,analyzeOpenModelProfile:k.Ch},K={myClub:{iconFile:"myclub-gradient",label:"My.Club"},twitter:{icon:"x-logo-ds",label:"Twitter"},instagram:{icon:"instagram-original",label:"Instagram"},snapchat:{icon:"snapchat-square",label:"Snapchat"},facebook:{icon:"facebook-square",label:"Facebook"},faphouse:{icon:"faphouse",label:"Faphouse"},xhamster:{icon:"xhamster-original",label:"xHamster"},xhamsterPornstar:{icon:"xhamster-original",label:"xhamsterPornstar"},amazonWishlist:{icon:"amazon-square",label:"Amazon"},fancentro:{icon:"fancentro",label:"Fancentro",processUrl:T.uG}},G=e=>{let{modelSocialLinks:t,modelSocialLinksIcons:i,model:s,isShowFaphouseLinkEnabled:r}=e;return(0,a.useMemo)(()=>{let e=(null==s?void 0:s.amazonWishlist)||"",l={...t,amazonWishlist:e};return Object.keys(K).filter(e=>!!l[e]&&(!!r||"faphouse"!==e)).map(e=>{let t=K[e],s=t.processUrl?t.processUrl((0,T.jh)(l[e])):(0,T.jh)(l[e]);return{className:"external-link",customItem:a.createElement(m.Z,{className:"header-sub-social-link",href:s,key:t.label,target:"_blank"},t.iconFile?a.createElement("img",{src:(0,T.jz)(`common/components/ui/HeaderSub/images/${t.iconFile}.svg`),className:(0,C.AK)("header-sub-social-link-main-icon","icon",`icon-${t.iconFile}`),alt:"social icon"}):a.createElement(v.Z,{img:t.icon||"question",className:"header-sub-social-link-main-icon"}),i[e]&&a.createElement(v.Z,{img:i[e],size:10,className:"header-sub-social-link-star-icon"}),a.createElement("span",{className:"social-name"},t.label)),label:t.label}})},[i,t,s,r])},j=e=>{let t=(0,y.T)(),{trans:i}=(0,b.QT)(),{isTimelineModelMenuEnabled:s,shouldShowFanClubButton:r,hasModelFeedNewPosts:l,modelUsername:o}=e,c=(0,a.useCallback)(()=>{t((0,f.sb)(`/${o}/${S.pt}`))},[o,t]);return(0,a.useMemo)(()=>[s&&{label:i("viewCam.subheader.feed"),route:{pathname:`/${o}/timeline`,hash:""},isActive:()=>!1},r&&{className:"external-link view-cam-header-sub__fan-club-button",customItem:a.createElement(n.Z,{source:"viewcamSubheader",hasUpdate:l,onClick:c}),label:"Fan Club"}],[s,r,l,o,c,i])},z=e=>{let t=(0,y.T)(),{isLoggedIn:i,shouldShowPlasma:s}=e,r=(0,a.useCallback)(()=>{i?g.P4.show(l.K,{}):t((0,U.cS)(E.Dt.SIGNUP_PLASMA,{type:"chatPlasma"}))},[i,t]);return(0,a.useMemo)(()=>s&&{className:"local-link plasma",customItem:a.createElement("a",{className:"header-sub-social-link",onClick:r},a.createElement(v.Z,{img:"plasma",size:20}),a.createElement("span",{className:"social-name"},"Messenger")),label:"Plasma"},[r,s])},q=({hasAccessToNotInterestedModels:e,model:t,isLoggedRegularUser:i,isDSAReportModelContentMessageAvailable:s})=>(0,a.useMemo)(()=>{if(!t)return[];let r=(0,O.T$)(t);return[{label:"ModelAdditionalMenu",className:"local-link model-aditional-menu",customItem:a.createElement(c.Z,{id:"view-cam-header-additional-menu",shouldSwitchToNextModelOnNotInterested:!0,report:{source:"viewcam"},portalRootId:x.y.IDS.HEADER_SUB_PORTAL_CONTAINER,model:r,variant:"view-cam-header"})},e&&{label:"NotInterestedModelButton",className:"header-sub-item-wrapper local-link model-aditional-menu-item",customItem:a.createElement(d.$,{model:r,className:"header-sub-button",shouldSwitchToNextModel:!0})},!s&&i&&{label:"ReportModelButton",className:"header-sub-item-wrapper local-link model-aditional-menu-item",customItem:a.createElement(u.t,{source:"viewcam",model:r,className:"header-sub-button"})},s&&{label:"ReportModelButton",className:"header-sub-item-wrapper local-link model-aditional-menu-item",customItem:a.createElement(A.f,{source:"viewcam",className:"header-sub-button",reportedUser:r,reportType:"model"})}]},[e,i,t,s]),Y=(e,t)=>{let{videosCount:i,photosCount:s,modelUsername:r}=e,{trans:l}=(0,b.QT)();return(0,a.useMemo)(()=>[{className:"local-link",label:l("viewCam.subheader.videos"),route:{pathname:`/${r}/videos`,hash:""},count:i,isActive:()=>!1,onClick:()=>t("VIDEO_BUTTON")},{className:"local-link",label:l("viewCam.subheader.gallery"),route:{pathname:`/${r}/photos`,hash:""},count:s,isActive:()=>!1,onClick:()=>t("ALBUM_BUTTON")}].filter(e=>e.count>0),[s,i,r,t,l])},Q=e=>{let{model:t,modelUsername:i,isMediaPage:s}=e,r=(0,y.T)(),{trans:l}=(0,b.QT)(),n=(0,a.useCallback)(e=>{r((0,k.Ch)({triggerSource:E.YW[e]}))},[r]),o=Y(e,n),c=j(e),d=z(e),u=G(e),m=q(e);return(0,a.useMemo)(()=>[{label:i,customItem:a.createElement(F,{model:t,isMediaPage:s,modelUsername:i,onClick:()=>n("MODEL_NAME")})},{className:"local-link",label:l("viewCam.subheader.profile"),route:`/${i}/profile`,isActive:()=>!1,badgeRight:a.createElement(p.Z,null),onClick:()=>n("PROFILE_BUTTON")},...o,...c,d,...u,...m].filter(Boolean),[i,t,o,c,d,u,m,s,n,l])},J=(0,r.EN)((0,s.$j)((e,t)=>{let i=t.match.params.username,a=t.model?(0,L.GA)(e,t.model.id):null,s=(0,_.Km)(e),r=a&&!s?(0,$.jQ)(e):0,l=a&&!s?(0,$.E)(e):0,{modelSocialLinks:n,modelSocialLinksIcons:o}=(0,R.V9)(e,t.model);return{isLoggedIn:(0,I.M7)(e),isMediaPage:(0,N.HK)(e),shouldShowPlasma:(0,W.M9)(e),shouldShowFanClubButton:(0,W.lv)(e),hasModelFeedNewPosts:(0,$.x$)(e),modelSocialLinks:n,modelSocialLinksIcons:o,isLoggedRegularUser:(0,I.Tv)(e),modelUsername:i,photosCount:r,videosCount:l,isTimelineModelMenuEnabled:(0,$.KW)(e),hasAccessToNotInterestedModels:(0,M.bl)(e),isShowFaphouseLinkEnabled:(0,P.jcC)(e),isDSAReportModelContentMessageAvailable:(0,w.PO)(e)}},H)(e=>{let t=Q(e);return a.createElement(h.Z,{className:"view-cam-header-sub",items:t,hasNextModel:!e.shouldHideNextModel,hasSearch:!0,hasCategories:!0})}))},67338:(e,t,i)=>{i.d(t,{b:()=>a});let a=(0,i(98846).n7)({resolved:{},chunkName:()=>"ModelFeedUnderViewCamEntry",isReady(e){let t=this.resolve(e);return!0===this.resolved[t]&&!!i.m[t]},importAsync:()=>Promise.all([i.e(8601),i.e(616)]).then(i.bind(i,9937)),requireAsync(e){let t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then(e=>(this.resolved[t]=!0,e))},requireSync(e){return i(this.resolve(e))},resolve:()=>9937})},39618:(e,t,i)=>{i.d(t,{G:()=>a,f:()=>s});let a=e=>e.error&&(e.dirty||e.submitFailed)||!e.dirtySinceLastSubmit&&e.submitError&&e.submitFailed,s=e=>!e.dirtySinceLastSubmit&&(e.error||e.submitError)&&e.submitFailed},18984:(e,t,i)=>{i.d(t,{ZP:()=>V});var a=i(18775),s=i(76482),r=i(37051),l=i(91343),n=i(27378),o=i(48204),c=i(14628),d=i(35506),u=i(62668),m=i(50557),p=i(41950),h=i(99973),v=i(99748),E=i(98846),g=i(243),S=i(98371),C=i(62182),b=i(2656),f=i(61061),T=i(51945),y=i(53514),w=i(38629),P=i(78021),N=i(14151),_=i(58320),k=i(60278),A=i(12265),I=i(79336),M=i(79561),R=i(29421);let L=(0,E.n7)({resolved:{},chunkName:()=>"webRTCPlayer",isReady(e){let t=this.resolve(e);return!0===this.resolved[t]&&!!i.m[t]},importAsync:()=>(0,E.JN)(()=>Promise.all([i.e(3740),i.e(603),i.e(4052)]).then(i.bind(i,26738))),requireAsync(e){let t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then(e=>(this.resolved[t]=!0,e))},requireSync(e){return i(this.resolve(e))},resolve:()=>26738},{isErrorBoundary:!1}),O=(0,E.n7)({resolved:{},chunkName:()=>"HLSPlayerWrapper",isReady(e){let t=this.resolve(e);return!0===this.resolved[t]&&!!i.m[t]},importAsync:()=>(0,E.JN)(()=>Promise.all([i.e(3740),i.e(6805)]).then(i.bind(i,67830))),requireAsync(e){let t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then(e=>(this.resolved[t]=!0,e))},requireSync(e){return i(this.resolve(e))},resolve:()=>67830},{isErrorBoundary:!1}),U=["scroll","mousemove","pointerdown","keydown"];class Z extends n.PureComponent{componentDidMount(){this.props.isMediaPage&&U.forEach(e=>document.addEventListener(e,this.handleFirstInteraction)),this.props.updateHLSStreamEndedState(!1),this.removeAudioStartListener=p.KY.subscribePlayAudioEvent(e=>{e.detail.playerId!==this.VideoPlayerId&&this.props.togglePlayerAvailability(!1)})}componentDidUpdate(e){var t,i,a;this.updateDocumentVisibilityState(e,this.props),(null==e?void 0:null===(t=e.model)||void 0===t?void 0:t.id)!==(null===(a=this.props)||void 0===a?void 0:null===(i=a.model)||void 0===i?void 0:i.id)&&this.setState({wasPlayed:!1})}componentWillUnmount(){var e;this.updateInitializePlayer&&this.updateInitializePlayer.cancel(),null===(e=this.removeAudioStartListener)||void 0===e||e.call(this),this.props.updateInitializePlayer(!1),this.clearTimeout(),U.forEach(e=>document.removeEventListener(e,this.handleFirstInteraction))}static getDerivedStateFromError(){return{isFailed:!0}}componentDidCatch(e,t){d.ZP.error(e,t),this.props.apiLog("error","playerFailed",{error:e.toString(),errorInfo:t})}render(){return this.state.isFailed?n.createElement(y.Z,null):n.createElement(w.default,{className:(0,v.AK)("player",I.j.player,this.props.className)},n.createElement(T._,null),this.renderPlayerContent(),n.createElement(c.P,{className:"player__player-controls"}),this.renderStreamController())}constructor(e){super(e),(0,a._)(this,"lastScrollY",0),(0,a._)(this,"updateInitializePlayer",(0,s.Z)(()=>{this.props.updateInitializePlayer(!0)},500)),(0,a._)(this,"removeAudioStartListener",void 0),(0,a._)(this,"VideoPlayerId",`WebRTC${(0,l.x0)()}`),(0,a._)(this,"timeoutId",void 0),(0,a._)(this,"handleFirstInteraction",e=>{if("scroll"===e.type&&this.lastScrollY<=window.scrollY){this.lastScrollY=window.scrollY;return}this.setState({isAfterUserInteraction:!0}),U.forEach(e=>document.removeEventListener(e,this.handleFirstInteraction))}),(0,a._)(this,"clearTimeout",()=>{void 0!==this.timeoutId&&clearTimeout(this.timeoutId)}),(0,a._)(this,"handlePlaying",()=>{this.state.wasPlayed||(this.setState({wasPlayed:!0}),this.props.onPlaying(),this.props.updateHLSStreamEndedState(!1))}),(0,a._)(this,"togglePlayerAvailabilityIfNeeded",({isDocumentVisible:e,isInPrivate:t,isBlurVideoOnPrivate:i})=>{if(h.BROWSER_CAPABILITIES.isMobile||h.BROWSER_CAPABILITIES.isTablet){if(e||i){this.clearTimeout();return}t?this.timeoutId=setTimeout(()=>this.props.togglePlayerAvailability(!1),6e4):this.props.togglePlayerAvailability(!1)}}),(0,a._)(this,"updateDocumentVisibilityState",(e,t)=>{let{isDocumentVisible:i}=t;(0,C.gk)(e,t)&&(i&&this.setState({isDocumentVisible:i}),this.togglePlayerAvailabilityIfNeeded(t))}),(0,a._)(this,"handlePlayClick",()=>{p.KY.emitPlayAudioEvent(this.VideoPlayerId),this.props.togglePictureInPicture(!1),this.props.togglePlayerAvailability(!0),this.props.updateDocumentVisibility()}),(0,a._)(this,"handleHLSStreamEnded",()=>{this.props.updateHLSStreamEndedState(!0)}),(0,a._)(this,"handleHLSStreamRestored",()=>{this.props.isHLSStreamWasEnded&&this.props.updateHLSStreamEndedState(!1)}),(0,a._)(this,"renderPlayer",()=>{let{lastSnapshotUrl:e,volume:t,playerType:i,isPlayerAvailability:a,isPictureInPicture:s,isMediaPage:r,isBackgroundForceStopPlaying:l}=this.props,{isDocumentVisible:o,isAfterUserInteraction:c}=this.state;if(!o||!a||s||r&&!c||l)return n.createElement(f.Z,{onClick:this.handlePlayClick});let d={lastSnapshotUrl:e,volume:t};switch(i){case N.PLAYER_TYPES.WEBRTC:return n.createElement(L,{onPlaying:this.handlePlaying,wasPlayed:this.state.wasPlayed,updatePlayerResolution:this.props.updatePlayerResolution,...d,updateInitializePlayer:this.updateInitializePlayer});case N.PLAYER_TYPES.HLS:default:return n.createElement(O,{onPlaying:this.handlePlaying,wasPlayed:this.state.wasPlayed,onStreamEnded:this.handleHLSStreamEnded,onStreamRestored:this.handleHLSStreamRestored,updatePlayerResolution:this.props.updatePlayerResolution,...d,updateInitializePlayer:this.updateInitializePlayer})}}),(0,a._)(this,"renderStreamController",()=>{let{playerType:e}=this.props;return e===N.PLAYER_TYPES.WEBRTC||e===N.PLAYER_TYPES.HLS?n.createElement(P.Z,null):null}),(0,a._)(this,"renderPlayerContent",()=>n.createElement(m.s,null,this.renderPlayer())),this.state={wasPlayed:!1,isDocumentVisible:this.props.isDocumentVisible,isFailed:!1,isAfterUserInteraction:!this.props.isMediaPage}}}(0,a._)(Z,"defaultProps",{isLoggedIn:!1,isInCam2Cam:!1,isInPrivate:!1,isPictureInPicture:!1,lastSnapshotUrl:"",playerType:"",volume:0,onPlaying:r.Z,isHLSStreamWasEnded:!1});let B={togglePlayerAvailability:A.X6,updatePlayerType:A.$5,updateInitializePlayer:b.kV,updateDocumentVisibility:u.uP,togglePictureInPicture:b.x0,apiLog:d.t$,updateHLSStreamEndedState:A.zH,setEmulatePlayerCrashState:b.LA},V=(0,o.$j)(e=>{let{auth:{isLoggedIn:t,isLoggingOut:i},viewCam:{model:a,isPlayerAvailability:s},ui:{isDocumentVisible:r},player:{isBroadcastSettingsVisible:l}}=e,n=(0,M.IW)(e);return{isDocumentVisible:!!r,isBroadcastSettingsVisible:l,isLoggedIn:t&&!i,isInCam2Cam:n&&(0,M.UP)(e),isInPrivate:n,model:a,isMediaPage:(0,g.HK)(e),playerType:(0,_.Aq)(e),isPlayerAvailability:s,volume:(0,_.Sf)(e),isPictureInPicture:(0,k.bd)(e),isHLSStreamWasEnded:(0,R.pc)(e),deviceType:(0,S.y$)(e),crashEmulateState:(0,k.jU)(e),isBackgroundForceStopPlaying:(0,_.aX)(e),isBlurVideoOnPrivate:(0,_.$C)(e)}},B)(Z)},51945:(e,t,i)=>{i.d(t,{_:()=>c});var a=i(27378),s=i(94380),r=i(95654),l=i(63256),n=i(2656),o=i(60278);let c=()=>{let e=(0,r.C)(o.jU),t=(0,r.C)(l.hXr),i=(0,s.T)();return a.useEffect(()=>{if(e&&t)throw i((0,n.LA)(!1)),Error("QA Test error")},[i,e,t]),null}},53514:(e,t,i)=>{i.d(t,{Z:()=>o});var a=i(27378),s=i(99382),r=i(99748),l=i(97606),n=i(79336);let o=()=>{let{trans:e}=(0,l.QT)();return a.createElement("div",{className:(0,r.AK)("player-error-boundary",n.j.player)},a.createElement("div",{className:"player-error-boundary__bg"},a.createElement("div",{className:"player-error-boundary__description"},e("errors.playerFailure.sorry"),a.createElement("br",null),e("errors.playerFailure.instruction")),a.createElement("div",{className:"player-error-boundary__action"},a.createElement(s.ZP,{style:"default-filled",onClick:()=>{window.location.reload()}},e("errors.playerFailure.reload")))))}},78021:(e,t,i)=>{i.d(t,{Z:()=>h});var a=i(27378),s=i(48204),r=i(75151),l=i(95366),n=i(37112),o=i(243),c=i(96811),d=i(58320),u=i(79561),m=i(29421);let p={fetchStreamPlayingPercent:r.oz},h=(0,s.$j)(e=>{let t=(0,m.iv)(e),i=(0,u.ze)(e);return{playerType:(0,d.Aq)(e),streamResolution:(0,d.Cj)(e),modelId:t,modelStatus:i,isViewCamPage:(0,o.mT)(e),streamControllerConfig:(0,d.Yb)(e)}},p)(({playerType:e,streamResolution:t,modelId:i,modelStatus:s,streamControllerConfig:r,isViewCamPage:o,fetchStreamPlayingPercent:d})=>{let u=(0,a.useCallback)(a=>{i&&s&&(n.Z.setFields({playingPercent:a.playingPercent}),d({playerType:e,streamResolution:t,modelId:i,modelStatus:s,stats:a}))},[i,s,e,d,t]);return(0,a.useEffect)(()=>{s===l.MODEL_STATUSES.STATUS_PUBLIC&&o?c.Z.init({...r,update:u}):c.Z.destroy()},[s,o,r,u]),null})},76811:(e,t,i)=>{i.d(t,{Z:()=>h});var a=i(18775),s=i(29955),r=i(37051),l=i(27378),n=i(48867),o=i(44054),c=i(97606),d=i(83705),u=i(37992),m=i(36916);class p extends l.PureComponent{componentDidUpdate(e){let{isBroadcastSettingsVisible:t}=this.props;this.interval&&clearInterval(this.interval),t&&(this.interval=setInterval(this.checkTracks,2e3),this.props.localStream!==e.localStream&&this.refilterResolutions())}componentWillUnmount(){this.interval&&clearInterval(this.interval)}render(){let{localStream:e,isMicOnly:t}=this.props;return t?l.createElement("div",{className:"web-rtc-settings"},l.createElement("div",{className:"web-rtc-settings-controls"},this.renderAudioDevices())):l.createElement("div",{className:"web-rtc-settings"},l.createElement("div",{className:"web-rtc-settings-controls"},this.renderVideoDevices(),this.renderAudioDevices(),this.renderVideoProfiles()),l.createElement(u.Z,{className:"web-rtc-settings-video-element",stream:e,isMuted:!0,isWatermark:!1}))}constructor(e){super(e),(0,a._)(this,"interval",void 0),(0,a._)(this,"refilterResolutions",()=>{let{localStream:e,resolutions:t,settings:{videoProfile:i}}=this.props;if(!t||!e)return;let a=e.getVideoTracks()[0];if(a){if(a.getCapabilities){var s,r;let e=a.getCapabilities(),[l,n]=[(null===(s=e.width)||void 0===s?void 0:s.max)||0,(null===(r=e.height)||void 0===r?void 0:r.max)||0],o=Object.entries(t).reduce((e,[t,i])=>(i.width<=l&&i.height<=n&&(e[t]=i),e),{}),c=!i||Object.keys(o).includes(i);if(i&&!c){let e=t[i].bitrate,a=Object.entries(o).sort(([,t])=>Math.abs(e-t.bitrate))[0][0];this.handleSelectVideoProfile({value:a})}this.setState({filteredResolutions:o})}else this.setState({filteredResolutions:t})}}),(0,a._)(this,"checkTracks",()=>{var e,t;let{isMuted:i,isCameraDisabled:a,localStream:s}=this.props,r=null==s?void 0:null===(e=s.getVideoTracks())||void 0===e?void 0:e[0],l=null==s?void 0:null===(t=s.getAudioTracks())||void 0===t?void 0:t[0];this.setState({isEmptyVideoTrack:!a&&this.getIsTrackEmpty(r),isEmptyAudioTrack:!i&&this.getIsTrackEmpty(l)})}),(0,a._)(this,"getIsTrackEmpty",e=>{let{devices:t}=this.props;return!(0,s.Z)(t)&&(0,m.U8)(e)}),(0,a._)(this,"handleSelectAudioDevice",e=>{this.props.changeBroadcastStreamSettings({audioDeviceId:e.value})}),(0,a._)(this,"handleSelectVideoDevice",e=>{this.props.changeBroadcastStreamSettings({videoDeviceId:e.value})}),(0,a._)(this,"handleSelectVideoProfile",({value:e})=>{this.props.changeBroadcastStreamSettings({videoProfile:e})}),(0,a._)(this,"renderVideoDevices",()=>{let{isEmptyVideoTrack:e}=this.state,{devices:t,settings:{videoDeviceId:i}}=this.props,a=this.props.i18n.trans("webRTC.settings.camera"),s=t.videoDevices.map((e,t)=>{let i=e.label||`${a} #${t+1}`;return{label:i,value:e.deviceId,title:i}});return l.createElement("div",{className:"web-rtc-control"},l.createElement("div",{className:"web-rtc-control-label"},this.props.i18n.trans("webRTC.settings.camera")),l.createElement(o.Z,{onSelect:this.handleSelectVideoDevice,options:s,placeholder:"default",size:"small",value:i,className:"web-rtc-control-select"}),e&&l.createElement("span",{className:"error"},this.props.i18n.trans("webRTC.settings.cameraError")))}),(0,a._)(this,"renderAudioDevices",()=>{let{isEmptyAudioTrack:e}=this.state,{devices:t,settings:{audioDeviceId:i}}=this.props,a=this.props.i18n.trans("webRTC.settings.microphone"),s=t.audioDevices.map((e,t)=>{let i=e.label||`${a} #${t+1}`;return{label:i,value:e.deviceId,title:i}});return l.createElement("div",{className:"web-rtc-control"},l.createElement("div",{className:"web-rtc-control-label"},this.props.i18n.trans("webRTC.settings.microphone")),l.createElement(o.Z,{onSelect:this.handleSelectAudioDevice,options:s,placeholder:"default",size:"small",value:i,className:"web-rtc-control-select"}),e&&l.createElement("span",{className:"error"},this.props.i18n.trans("webRTC.settings.microphoneError")))}),(0,a._)(this,"renderVideoProfiles",()=>{let{isBroadcastStarted:e,isBroadcastingPageOpen:t,settings:{videoProfile:i}}=this.props,{filteredResolutions:a}=this.state,s=(0,d.U)(a,(e,t)=>{let i=this.props.i18n.trans(`webRTC.profiles.${t}`);return{label:i,value:t,title:i}});return t?l.createElement("div",{className:"web-rtc-control"},l.createElement("div",{className:"web-rtc-control-label"},this.props.i18n.trans("webRTC.settings.resolution"),l.createElement(n.Z,{className:"web-rtc-help",messageId:"webRTC.settings.resolutionHelp"})),l.createElement(o.Z,{onSelect:this.handleSelectVideoProfile,options:s,placeholder:"default",size:"small",value:i,isDisabled:e,className:"web-rtc-control-select"})):null}),this.state={filteredResolutions:e.resolutions}}}(0,a._)(p,"defaultProps",{isBroadcastStarted:!1,isMuted:!1,isCameraDisabled:!1,isBroadcastSettingsVisible:!1,devices:{audioDevices:[],videoDevices:[]},resolutions:null,localStream:null,settings:{},changeBroadcastStreamSettings:r.Z,isMicOnly:!1});let h=(0,c.GV)(p)},39975:(e,t,i)=>{i.d(t,{K:()=>d});var a=i(71817),s=i(32367),r=i(95366),l=i(70203),n=i(14151),o=i(74178);let c={videoDeviceId:"",audioDeviceId:"",facingMode:n.pT.USER},d=(e,t,i)=>{let n={videoProfile:i.targetResolution,...c};if(!(0,a.Z)(t,n.videoProfile||"")){let e=(0,s.Z)(t,(e,i,a)=>i.bitrate>t[e].bitrate?a:e,Object.keys(t)[0]);n.videoProfile=e}if(e)return n.videoProfile=o.xA.MHD,n;let d=l.m.get(r.Hx,n);if(!d)return n;let{videoProfile:u}=d;return(0,a.Z)(t,u)||(d.videoProfile=n.videoProfile),d}},69497:(e,t,i)=>{i.d(t,{Gi:()=>E,K5:()=>g});var a=i(27378),s=i(20377),r=i(87937),l=i(72036);let n="main.js",o=({version:e,origin:t,moduleName:i})=>`${t}${e?`/v${e}`:""}/${i||n}`,c={},d=async()=>{c.buffer={exports:await i.e(816).then(i.t.bind(i,30816,19))},c.react={exports:a},c["react/jsx-runtime"]={exports:await i.e(7270).then(i.t.bind(i,24246,19))}},u={},m=async({origin:e,version:t="",moduleName:i=n})=>{let a,r;Object.keys(c).length||await d();let l=o({version:t,origin:e,moduleName:i});if(l in u)return await u[l];u[l]=new Promise(e=>{a=e});try{r=await fetch(l)}catch(e){throw delete u[l],new s.MS(e)}if(!r.ok)throw delete u[l],new s.MS(await r.text());let p=await r.text(),h={exports:{}},{exports:v}=h;return Function("module","exports","require",p)(h,v,i=>{if(i.endsWith(".js")){let a=i;return a.startsWith("./")&&(a=a.slice(2)),m({origin:e,version:t,moduleName:a})}if(c[i]){var a;return null===(a=c[i])||void 0===a?void 0:a.exports}return{}}),a(h.exports),h.exports},p=async()=>Promise.all([i.e(816),i.e(1725)]).then(i.bind(i,61725)),h=async()=>Promise.all([i.e(7270),i.e(8697)]).then(i.bind(i,28697)),v=async({isExternalSourceEnabled:e,externalSourceOrigin:t,externalVersion:i,maxAttempts:a,localModuleLoader:n})=>{let c=null,d=!1;if((0,r.sk)()||e&&!t)return{module:c,localModuleLoaderWasUsed:d};if(!e)return c=await n(),d=!0,c&&(u[o({version:i,origin:t})]=Promise.resolve(c)),{module:c,localModuleLoaderWasUsed:d};try{c=await (0,l.k)(()=>m({origin:t,version:i}),250,a||0,0,e=>!(e instanceof s.MS))}catch(e){d=!0,(c=await n())&&(u[o({version:i,origin:t})]=Promise.resolve(c))}return{module:c,localModuleLoaderWasUsed:d}},E=async e=>{let{module:t}=await v({...e,localModuleLoader:p});return t},g=async e=>{let{localModuleLoaderWasUsed:t,module:i}=await v({...e,localModuleLoader:h});return{localModuleLoaderWasUsed:t,module:i}}},5144:(e,t,i)=>{i.d(t,{O:()=>r});var a=i(27378),s=i(98655);let r=(0,i(98846).n7)({resolved:{},chunkName:()=>"AddToSubscriptionModal",isReady(e){let t=this.resolve(e);return!0===this.resolved[t]&&!!i.m[t]},importAsync:()=>i.e(2230).then(i.bind(i,63324)),requireAsync(e){let t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then(e=>(this.resolved[t]=!0,e))},requireSync(e){return i(this.resolve(e))},resolve:()=>63324},{ssr:!1,resolveComponent:e=>e.AddToSubscriptionModal,fallback:a.createElement(s.c,null)})},94296:(e,t,i)=>{i.d(t,{_:()=>a});let a=(0,i(98846).n7)({resolved:{},chunkName:()=>"ViewCamProfile",isReady(e){let t=this.resolve(e);return!0===this.resolved[t]&&!!i.m[t]},importAsync:()=>Promise.all([i.e(6092),i.e(6038),i.e(6979),i.e(9152)]).then(i.bind(i,36358)),requireAsync(e){let t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then(e=>(this.resolved[t]=!0,e))},requireSync(e){return i(this.resolve(e))},resolve:()=>36358})},75601:(e,t,i)=>{i.r(t),i.d(t,{ViewCamPage:()=>eJ,default:()=>e0});var a=i(18775),s=i(66813),r=i(99942),l=i(13165),n=i(27378),o=i(48204),c=i(89),d=i(52872),u=i(68994),m=i(44143),p=i(29409),h=i(95366),v=i(96069),E=i(39120),g=i(99748),S=i(87937),C=i(42815),b=i(80176),f=i(82168),T=i(66261),y=i(13743),w=i(63256),P=i(12712),N=i(62203),_=i(88275),k=i(98853),A=i(2656),I=i(58320),M=i(60278),R=i(3160),L=i(65710),O=i(87489),U=i(79137),Z=i(91456),B=i(38933),V=i(66483),D=i(32284),F=i(97986),W=i(97606),$=i(94380),x=i(95654),H=i(28656),K=i(98371),G=i(13219),j=i(74012),z=i(12265),q=i(85353);let Y=()=>n.createElement("div",{className:"view-cam"},n.createElement("div",{className:"wrapper"},n.createElement("div",{className:"main"},n.createElement("div",{className:"strut"}))),n.createElement("div",{className:"controls-wrapper"})),Q=({isVisible:e=!0,message:t})=>e?n.createElement("div",{className:"loader-wrapper"},n.createElement(q.Z,{isCentered:!0}),t?n.createElement("div",{className:"loader-wrapper-message"},t):null):null,J=({content:e=null,loadingMessage:t=""})=>n.createElement("div",{className:"main"},e,n.createElement(Q,{isVisible:!e,message:t}),n.createElement("div",{className:"video"},n.createElement(Y,null))),X=({children:e})=>{let[,t]=(0,n.useTransition)(),[i,a]=(0,n.useState)(!0);return(0,n.useEffect)(()=>{t(()=>{a(!1)})},[]),i?null:n.createElement(n.Fragment,null,e)};var ee=i(47080),et=i(46486),ei=i(3620),ea=i(4289),es=i(29413),er=i(67338),el=i(7914),en=i(98699),eo=i(69024),ec=i(86320),ed=i(39709),eu=i(94296),em=i(21044);let ep=e=>(0,n.useMemo)(()=>(0,D.T$)(e),[e]),eh=e=>"profile"===e||"photos"===e||"videos"===e||"timeline"===e;var ev=i(79561),eE=i(29421);let eg=({model:e})=>{let{trans:t}=(0,W.QT)(),i=(0,x.C)(eE.KW),a=(0,x.C)(P.z),s=(0,x.C)(eE.x$),r=(0,x.C)(ev.L),l=(0,x.C)(eE._W),o=r||(null==l?void 0:l.isActive),c=(0,x.C)(e=>(0,eE.E)(e)),d=(0,x.C)(e=>(0,eE.jQ)(e)),u=(0,x.C)(w.VgH),m=(0,O.n3)(e),p=ep(e),v=(0,ei.k6)(),{hasProfile:E,timelineType:S,mediaType:C,mediaId:b}=(0,ei.UO)(),f=null,T=(0,n.useRef)(null);if(E||"profile"===T.current&&b?f="profile":S?f="timeline":C&&eh(C)&&(f=C),(0,H.L)(()=>{!e||("photos"!==f||d)&&("videos"!==f||c)&&("timeline"!==f||i)||v.replace(`/${e.username}/profile`)},[f,e,e.username,v,d,c,i]),!C&&!S&&!E)return null;T.current=f;let y=u&&e.isNonNude,N=[{key:"profile",label:t("viewCam.subheader.profile"),to:{pathname:`/${e.username}/profile`,state:{shouldSkipScroll:!0}},isActive:()=>"profile"===f}];return c&&!y&&N.push({key:em.oZ.VIDEOS,label:t("viewCam.subheader.videos"),count:c,to:{pathname:`/${e.username}/${em.oZ.VIDEOS}`,state:{shouldSkipScroll:!0}},isActive:()=>f===em.oZ.VIDEOS}),d&&!y&&N.push({key:em.oZ.PHOTOS,label:t("viewCam.subheader.gallery"),count:d,to:{pathname:`/${e.username}/${em.oZ.PHOTOS}`,state:{shouldSkipScroll:!0}},isActive:()=>f===em.oZ.PHOTOS}),i&&N.push({key:"timeline",label:n.createElement(n.Fragment,null,t(o?"viewCam.subheader.fanClubAndFeed":"viewCam.subheader.feed"),s&&n.createElement("span",{className:"user-feed-link-attention-marker"})),to:{pathname:`/${e.username}/${o?el.pt:el.Ps}`,state:{shouldSkipScroll:!0}},isActive:()=>"timeline"===f}),n.createElement("div",{className:(0,g.AK)("view-cam-model-info profile-wrapper",{isTheatreMode:a})},n.createElement("div",{className:"page"},n.createElement("div",{className:"header-sub navigation"},n.createElement("div",{className:"right-navigation-section"},n.createElement(ea.rU,{to:`/${e.username}`,className:"close-icon-wrapper","aria-label":t("aria.links.model")},n.createElement(es.Z,{img:"close-2",size:14})))),n.createElement("div",{className:"profile-cover-wrapper"},n.createElement(ec.Z,{user:p,isProfileAvailable:!0,editable:!1,isLive:e.isLive,modelData:m})),n.createElement(ed.l,{menuItems:N,className:h.ByQ}),"profile"===f&&n.createElement(n.Fragment,null,n.createElement(eu._,{user:p,modelData:m}),n.createElement("div",{className:"container"},n.createElement(ea.rU,{to:`/${e.username}`,className:"bottom-close icon-wrapper","aria-label":t("aria.links.model")},n.createElement(es.Z,{img:"scroll-top",size:50})))),"timeline"===f&&n.createElement(er.b,{model:e,timelineType:S}),f===em.oZ.PHOTOS&&n.createElement(en.D,{owner:p,ownerData:m}),f===em.oZ.VIDEOS&&n.createElement(eo.J,{wrapper:"user-page",listClassName:"user-videos-page__video-list",isOwnProfile:!1,user:p,modelData:m})))},eS=({model:e})=>{let t=(0,$.T)(),i=null==e?void 0:e.id;return((0,n.useEffect)(()=>{i&&t((0,F.f5)(i))},[i,t]),e)?n.createElement(eg,{model:e}):null};var eC=i(97683),eb=i(75845),ef=i(65804),eT=i(67809);let ey=()=>{let e=(0,x.C)(eb.Z8);return(null==e?void 0:e.length)?n.createElement("div",{className:"view-cam-model-tags-specials"},n.createElement("p",{className:"view-cam-model-tags-title"},n.createElement(ef.Z,{messageId:"viewCam.tagsInfo.relatedTags"})),n.createElement(eT.ZP,{shouldShowMore:!0,shouldShowCategoriesButton:!1,tags:e,variant:"multi-line"})):null},ew=({tagGroup:e})=>{if("mixedTags"===e.alias)return null;let t=`viewCam.tagsInfo.tagGroupTitle_${e.alias}`,i=n.createElement(ef.Z,{messageId:t}),a=n.createElement("p",{className:"view-cam-model-tags-group-title"},i);return n.createElement("div",{key:e.alias,className:"view-cam-model-tags-group"},n.createElement("p",{className:"view-cam-model-tags-group-title-mobile"},i),n.createElement(eT.ZP,{contentStart:a,shouldShowCategoriesButton:!1,tags:e.tags,variant:"multi-line"}))},eP=({modelUsername:e})=>{let t=(0,x.C)(eb.dH),i=(0,x.C)(N.ok);return(null==t?void 0:t.length)?n.createElement(n.Fragment,null,n.createElement(i?"h2":"p",{className:"view-cam-model-tags-title"},n.createElement(ef.Z,{messageId:"viewCam.tagsInfo.title",elements:{link:n.createElement(ea.rU,{className:"link",to:`/${e}/profile`})},parameters:{modelName:e}})),t.map(e=>n.createElement(ew,{key:e.alias,tagGroup:e}))):null},eN=({model:e})=>e?n.createElement("div",{className:"view-cam-model-tags"},n.createElement(eP,{modelUsername:e.username}),n.createElement(ey,null)):null,e_=({model:e,snapshotUrl:t})=>{let i=(0,x.C)(ev.Fu),a=(0,x.C)(P.z);return n.createElement(n.Fragment,null,n.createElement(eC.Z,{isTheatreModeActive:a,model:e,snapshotUrl:t,shouldShowOtherModels:i}),n.createElement("div",null,n.createElement(eS,{model:e})),!a&&n.createElement(ee.$,{className:"widescreen-container",onlyPaymenticoAllowed:!0}),i&&!a&&n.createElement(n.Fragment,null,n.createElement(X,null,n.createElement(et.S,{model:e})),n.createElement("div",{className:"widescreen-container"},n.createElement(eN,{model:e}))))},ek=({isAutoSpyExpected:e})=>{let{trans:t}=(0,W.QT)();return n.createElement(J,{loadingMessage:e?t("modelsRoomIsLoading"):""})},eA=n.memo(({model:e,username:t,hasProfile:i,snapshotUrl:a})=>{let s=(0,$.T)(),r=(0,x.C)(ev.Dg),l=(0,x.C)(j.ts),o=(0,x.C)(K.ne),c=(0,n.useRef)(null);return(0,n.useEffect)(()=>{(0,U.eN)({isLoggedIn:!!l,currentUser:l},{isLoggedIn:!!c.current,currentUser:c.current})&&!o&&i&&e&&s((0,G.TR)(e.username)),l&&(c.current=l)},[l,s,o,i,e]),(0,H.L)(()=>{s((0,z.t1)(t))},[s,t]),n.createElement("div",{className:"view-cam-container"},r?n.createElement(ek,{isAutoSpyExpected:r}):n.createElement(e_,{model:e,snapshotUrl:a}))});var eI=i(80522),eM=i(15428),eR=i(99973),eL=i(46607);let eO=({isBanned:e,isGeoBanned:t,model:i})=>{let{trans:a}=(0,W.QT)(),s=t?"country-ban":"account-blocked-colored",r=(0,x.C)(e=>(0,eL.t0)(e,i.id)),l=(0,n.useMemo)(()=>{if(t)return a("camChat.yourCountryIsBlockedByModel");let e=(null==r?void 0:r.type)||em.Gq.BAN_FOREVER;return n.createElement(n.Fragment,null,i.username,n.createElement("br",null),a(`bans.profilePeriods.${e}`))},[t,i.username,null==r?void 0:r.type,a]),o=(0,n.useMemo)(()=>{if(t)return null;let e=a("bans.profileReasonDescription.common");return!(null==r?void 0:r.reason)||em.Nc.includes(r.reason)?e:n.createElement(n.Fragment,null,n.createElement(ef.Z,{elements:{highlight:n.createElement("span",{className:"banned-container-description__highlight"})},messageId:`bans.profileReasonDescription.${r.reason}`}),n.createElement("br",null),e)},[t,null==r?void 0:r.reason,a]);return e||t?n.createElement(eM.M,{status:t?eR.EH.SUCCESS:eR.EH.FORBIDDEN},n.createElement("div",{className:"page view-cam-page banned"},n.createElement("div",{className:"main"},n.createElement("div",{className:(0,g.AK)("banned-container",{"banned-container_geo":t})},n.createElement(es.Z,{img:s,fullyCSSControlled:!0}),n.createElement("div",{className:"banned-container-title"},l),o&&n.createElement("div",{className:"banned-container-description"},o))))):null};var eU=i(64402),eZ=i(243),eB=i(44421),eV=i(71097),eD=i(45793);let eF=({model:e,isNotFoundStatus:t,isGeoBanned:i})=>{let{trans:a}=(0,W.QT)(),s=(0,x.C)(eZ.mT),r=i?"modelAccountHiddenPage":"modelAccountDeletedPage";return n.createElement(eD.Z,{className:"account-disabled-page model-deleted-page container page"},t&&n.createElement(eI.Z,{status:eR.EH.NOT_FOUND}),n.createElement("div",{className:"deleted-wrapper"},n.createElement(es.Z,{img:"account-disabled",size:100}),n.createElement("div",{className:"account-disabled-header"},a(`${r}.title`)),n.createElement("div",{className:"account-disabled-description"},a(`${r}.description`,{modelname:e.username}))),n.createElement("div",null,s?n.createElement(eV.Z,{shouldLogPopularSnapshot:!0,isWidescreen:!1,onlyInitialLoad:!0,showFilters:!0}):n.createElement(eB.a,{shouldLogPopularSnapshot:!0})))};var eW=i(30399);let e$=({username:e,children:t})=>{let i=(0,x.C)(eW.oL),a=(0,x.C)(eW.cs),s=(0,x.C)(eZ.Ol);return i&&a?"notModel"===a.type?n.createElement(eI.Z,{to:`/user/${e}`}):"newUsername"===a.type?n.createElement(eI.Z,{to:s.replace(e,a.newUsername)}):"notFound"===a.type?n.createElement(eU.Z,null):"deleted"===a.type||"blocked"===a.type||"notApproved"===a.type?n.createElement(eF,{model:a.model,isNotFoundStatus:!0,isGeoBanned:!1}):"geoBanned"===a.type?n.createElement(eF,{model:a.model,isNotFoundStatus:!1,isGeoBanned:!0}):"banned"===a.type?n.createElement(eO,{model:a.model,isBanned:!0,isGeoBanned:!1}):n.createElement(n.Fragment,null,t):n.createElement(n.Fragment,null,t)};var ex=i(89061),eH=i(88056),eK=i(6966);function eG({image:e}){let t=[];return t.push((0,eK.by)("type","website")),t.push((0,eK.by)("image",e)),t}let ej=({username:e,mediaMeta:t,titleLimit:i,mediaType:a,videosCount:s,isStripChat:r,hasProfile:l,photosCount:o,modelStatus:c,isNonNudeWL:d,isXhlOrMirror:u,topicOrGoal:m,snapshotUrl:p})=>{let h;let{transSeo:v,transSeoFormatted:E}=(0,W.QT)(),g="",S="",C=(0,ex.Z)(e);if(t)g=E(`seo.title.${t.type}`,{model:C,...t,seoExtra:!1},{limit:i}),S=t.description||E("seo.description.media",{model:C,seoExtra:!1},{limit:eR.J7,shouldShowEllipsis:!0}),h=function({type:e,description:t,media:i}){let a=[];switch(e){case"photo":a=eG({image:i.url});break;case"album":a=eG({image:i.preview});break;case"video":a=function({preview:e}){let t=[];return t.push((0,eK.by)("type","video.other")),e&&t.push((0,eK.by)("image",e)),t}({preview:i.coverUrl})}return a.length&&t&&a.push((0,eK.by)("description",t)),a}(t);else if(a===em.oZ.VIDEOS||a===em.oZ.PHOTOS){let e=a===em.oZ.VIDEOS&&s&&s>=20&&r;g=E(`seo.title.${a}.${e?"model_many_videos":"model"}`,{username:C,seoExtra:!1,videosCount:s},{limit:i}),S=E(`seo.description.${a}.model`,{username:C,seoExtra:!1},{limit:eR.J7,shouldShowEllipsis:!0})}else if(l)g=E("seo.title.profile.model",{username:C,seoExtra:!1},{limit:i}),S=E("seo.description.profile.model",{username:C,photos:o,videos:s,status:c,seoExtra:!1},{limit:eR.J7,shouldShowEllipsis:!0});else throw Error("Not a content page, use ViewCamShowPageMeta");d&&(g=v("seo.title.camNonNudeWL",{model:e,seoExtra:!1}),S=v("seo.description.camNonNudeWL",{model:e,seoExtra:!1}));let{descriptionOg:b,imageOg:f}=r||u?{descriptionOg:m,imageOg:p}:{descriptionOg:S,imageOg:void 0};return n.createElement(eH.Z,{title:g,description:S,descriptionOg:b,imageOg:f,tags:h})},ez=({username:e,isNonNudeWL:t,titleLimit:i,topicOrGoal:a,isStripChat:s,isXhlOrMirror:r,snapshotUrl:l})=>{let{transSeo:o,transSeoFormatted:c}=(0,W.QT)(),d="",u="",m=(0,ex.Z)(e);t?(d=o("seo.title.camNonNudeWL",{model:e,seoExtra:!1}),u=o("seo.description.camNonNudeWL",{model:e,seoExtra:!1})):(d=c("seo.title.cam",{model:m,seoExtra:!1},{limit:i}),u=c("seo.description.cam",{model:m,topicOrGoal:a,seoExtra:!1},{limit:eR.J7,shouldShowEllipsis:!0}));let{descriptionOg:p,imageOg:h}=s||r?{descriptionOg:a,imageOg:l}:{descriptionOg:u,imageOg:void 0};return n.createElement(eH.Z,{title:d,description:u,descriptionOg:p,imageOg:h,skipRobots:!0})},eq=({isNonNudeWL:e,match:{params:{username:t,mediaType:i}},titleLimit:a,topicOrGoal:s,hasProfile:r,isStripChat:l,isXhlOrMirror:o,photosCount:c,snapshotUrl:d,videosCount:u,mediaMeta:m,modelStatus:p})=>m||i===em.oZ.VIDEOS||i===em.oZ.PHOTOS||r?n.createElement(ej,{username:t,mediaMeta:m,titleLimit:a,mediaType:i,videosCount:u,isStripChat:l,hasProfile:r,photosCount:c,modelStatus:p,isNonNudeWL:e,isXhlOrMirror:o,topicOrGoal:s,snapshotUrl:d}):n.createElement(ez,{username:t,isNonNudeWL:e,titleLimit:a,topicOrGoal:s,isStripChat:l,isXhlOrMirror:o,snapshotUrl:d});var eY=i(92201);let eQ=["profile","videos","photos"];class eJ extends n.Component{componentDidMount(){let{isPictureInPictureEnabled:e}=this.props;this._isMounted=!0,this.unblockRouter=this.props.history.block(this.routerWillLeave),f.Z.reset(),e&&this.props.togglePictureInPicture(!1),this.optionalAvailableSettingsLoading()}componentWillUnmount(){var e;let{isPictureInPictureEnabled:t,model:i}=this.props;this._isMounted=!1,null===(e=this.unblockRouter)||void 0===e||e.call(this),t&&(null==i?void 0:i.status)===h.MODEL_STATUSES.STATUS_PUBLIC&&this.props.togglePictureInPicture(!0),this.props.resetViewCamBase()}componentDidUpdate(e){!e.model&&this.props.model&&f.Z.reset()}replaceCurrentHistoryEntry(e){var t;let{hasProfile:i,hasRouteConflict:a,match:{params:{username:s},url:l},model:n,modelAction:o,isVisitorsAgreementAccepted:c,isLoggedIn:d}=e;if(!this._isMounted)return!1;let u=!!n&&n.isModel,m=!!n&&n.isStudio,p=!!n&&!u&&!m,h=i?"/profile":"";return u&&"follow-me"===o?(this.props.routerReplace(`/${n.username}`),!d&&n.isApprovedModel&&(c?this.props.checkInAsReferee(s):this.props.saveModelReferee(s)),!0):u&&a?(this.props.routerReplace(`/cams/${n.username}${h}`),!0):u&&(0,r.Z)(l,"/cams/")&&!a||u&&(null==s?void 0:s.toLowerCase())!==(null===(t=n.username)||void 0===t?void 0:t.toLowerCase())?(this.props.routerReplace(`/${n.username}${h}`),!0):m?(this.props.routerReplace(`/studio/${n.username}${h}`),!0):!!p&&(this.props.routerReplace(`/user/${n.username}${h}`),!0)}renderMeta(){return n.createElement(eq,this.props)}renderContainer(){let{match:e,model:t,snapshotUrl:i}=this.props;return n.createElement(eA,{hasProfile:!!e.params.hasProfile,username:e.params.username,snapshotUrl:i,model:t})}render(){let{isTheatreModeActive:e,username:t}=this.props;return n.createElement(E.Z,{propsUpdateToActionsMap:this.propsUpdateToActionsMap,...this.props},n.createElement("div",{className:(0,g.AK)("view-cam-page-wrapper",{"theatre-mode":e})},this.renderMeta(),n.createElement(e$,{username:t},n.createElement("div",{className:"view-cam-page"},this.renderContainer(),n.createElement(c.e,null)))))}constructor(...e){super(...e),(0,a._)(this,"_isMounted",!1),(0,a._)(this,"unblockRouter",void 0),(0,a._)(this,"isInitRequestDone",n.createRef()),(0,a._)(this,"optionalAvailableSettingsLoading",()=>{let{photoConfig:e}=this.props;e||this.props.loadAvailableSettings()}),(0,a._)(this,"routerWillLeave",e=>{var t,i,a;let{location:s,shouldOpenLinksInNewTab:r,isTimeline:n}=this.props,o=null!==(i=null==s?void 0:s.pathname)&&void 0!==i?i:"",c=null!==(a=null==e?void 0:e.pathname)&&void 0!==a?a:"",d=o!==c,u=d&&(0,l.Z)(o)===(0,l.Z)(c),[,,m]=c.split(/\/|#/),p=!eQ.includes(m);if(C.ZP.addClick(c),(0,S.C5)()&&r)return d&&window.open(e.pathname),!!u&&void 0;!d||"/"===c||!p||n||(null==e?void 0:null===(t=e.state)||void 0===t?void 0:t.shouldSkipScroll)||f.Z.reset(),d&&p&&this.props.giveControlDestroy()}),(0,a._)(this,"propsUpdateToActionsMap",[{update:[U.M7,U.iM],action:e=>{let{isActiveModel:t,match:{params:{username:i}}}=this.props;if(this.props.hideNotification({key:"subscription"}),!t){this.replaceCurrentHistoryEntry(this.props);return}t&&(0,u.T)(i)&&(this.props.initViewCam({username:i,previousModelPageSection:e.modelListSectionName||"",willKnightsBeLoaded:this.isInitRequestDone.current||!this.props.hasProfile}).finally(()=>this.replaceCurrentHistoryEntry(this.props)),this.isInitRequestDone.current=!0)}},{update:"model.status",action:()=>{let{model:e}=this.props;e&&(("private"===e.status||"p2p"===e.status)&&m.a.preload(),"groupShow"===e.status&&p.r.preload())}}])}}let eX={checkInAsReferee:L.eT,initViewCam:F.S1,hideNotification:_.yK,routerReplace:b.sb,saveModelReferee:L.cO,togglePictureInPicture:A.x0,loadAvailableSettings:R.z,giveControlDestroy:d.Os,resetViewCamBase:eY.bk.actions.reset},e0=(0,o.$j)((e,t)=>{var i;let{auth:{currentUser:a,isLoggedIn:r,isLoggingOut:l}}=e,{match:{params:{hasProfile:n,modelAction:o="",timelineType:c,username:d,mediaType:u}}}=t,m=(0,v.AQ)(e,d),p=(0,y.Uh)(e,`/${d}`),h=(0,V.Mp)(e,d),E=null===(i=null==m?void 0:m.isApprovedModel)||void 0===i||i,g=(0,B.Y)(e,{model:m}),S={};m&&(n||u)&&(S={photosCount:(0,eE.jQ)(e),videosCount:(0,eE.E)(e),modelStatus:m.offlineStatus,siteName:(0,N.hA)(e)});let C=(0,I.$C)(e);return{currentUser:a,shouldOpenLinksInNewTab:(0,ev.o9)(e,t),hasProfile:!!n,hasRouteConflict:p,isActiveModel:E&&!h,isLoggedIn:r&&!l,isNonNudeWL:(0,N.Km)(e),isStripChat:(0,N.ok)(e),isXhlOrMirror:(0,N.cv)(e),photoConfig:(0,Z.VD)(e),isTheatreModeActive:(0,P.z)(e),mediaMeta:g,model:m,modelAction:o,isTimeline:!!c,snapshotUrl:m?(0,s.iJ)({mode:C?"blurred":void 0,isLowQualityPreview:!1,model:(0,D.T$)(m),modelData:(0,O.tA)(m),snapshotUrlTemplate:(0,w.FOC)(e),hasWebpSupport:(0,w.h69)(e)}).url:null,username:d,titleLimit:(0,N.Ei)(e),topicOrGoal:(0,ev.Ms)(e),isPictureInPictureEnabled:(0,M.Tm)(e),isVisitorsAgreementAccepted:(0,k.IG)(),modelListSectionName:(0,T.TF)(e),...S}},eX)(eJ)},46486:(e,t,i)=>{i.d(t,{S:()=>a});let a=(0,i(98846).n7)({resolved:{},chunkName:()=>"ViewCamModelListWrapper",isReady(e){let t=this.resolve(e);return!0===this.resolved[t]&&!!i.m[t]},importAsync:()=>i.e(4134).then(i.bind(i,30608)),requireAsync(e){let t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then(e=>(this.resolved[t]=!0,e))},requireSync(e){return i(this.resolve(e))},resolve:()=>30608},{fallback:void 0})},97683:(e,t,i)=>{i.d(t,{Z:()=>g});var a=i(27378),s=i(87048),r=i(62962),l=i(48361),n=i(99748),o=i(98846),c=i(95654),d=i(62663),u=i(80092),m=i(74012),p=i(29771),h=i(46672);let v=(0,o.n7)({resolved:{},chunkName:()=>"[dynamic@Lottery]",isReady(e){let t=this.resolve(e);return!0===this.resolved[t]&&!!i.m[t]},importAsync:()=>i.e(3298).then(i.bind(i,55502)),requireAsync(e){let t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then(e=>(this.resolved[t]=!0,e))},requireSync(e){return i(this.resolve(e))},resolve:()=>55502},{fallback:void 0,ssr:!1}),E=()=>{let e=(0,c.C)(m.ts),t=(0,c.C)(u.gI);return!(!e||!e.isStudio&&!e.isModel)||t?null:a.createElement(v,null)},g=({model:e,snapshotUrl:t,shouldShowOtherModels:i,isTheatreModeActive:o})=>{let{isLayoutUpToL:c}=(0,d.do)("isLayoutUpToL");return a.createElement(a.Fragment,null,!o&&a.createElement(l.Z,{model:e,shouldHideNextModel:!i}),a.createElement("div",{className:"page"},a.createElement("div",{className:(0,n.AK)("view-cam-page-main widescreen-container",{"theatre-mode":o})},a.createElement(h.L,null),a.createElement("div",{className:"video"},a.createElement(p.Z,{model:e,snapshotUrl:t})),c&&a.createElement(s.$,null),a.createElement("div",{className:"chat"},a.createElement(r.W,{chatOwner:e}),!o&&a.createElement(E,null)))))}},29771:(e,t,i)=>{i.d(t,{Z:()=>a9});var a,s=i(18775),r=i(27378),l=i(48204),n=i(94380),o=i(95654),c=i(63256),d=i(14151),u=i(58320),m=i(60278),p=i(12265),h=i(79561);let v=()=>{let e=(0,n.T)(),t=(0,o.C)(m.HN),i=(0,o.C)(c.pIH),a=(0,o.C)(h.UP),s=(0,o.C)(h.tM),l=(0,o.C)(h.gJ),v=(0,o.C)(u.fM),E=(0,o.C)(m.Jl);(0,r.useEffect)(()=>{if(!l&&(s&&e((0,p.$5)("")),t&&a)){let t=!v||!E;(!i||i&&t)&&e((0,p.$5)(d.PLAYER_TYPES.WEBRTC))}},[e,t,l,v,a,s,E,i])},E=()=>(v(),null);var g=i(38901),S=i(28865),C=i(95366),b=i(23359),f=i(96069),T=i(68798),y=i(77382),w=i(62668),P=i(83550),N=i(81346),_=i(80936),k=i(82362),A=i(54534),I=i(91090),M=i(99973),R=i(47813),L=i(99748),O=i(42815),U=i(64696),Z=i(62512),B=i(37112),V=i(70203),D=i(66261),F=i(13743),W=i(58543),$=i(62182),x=i(27251),H=i(12712),K=i(62203),G=i(80092),j=i(2656);let z={updateIsBackgroundThrottle:j.gk,updateIsBackgroundForceStopPlaying:j.ZF};class q extends r.Component{componentDidUpdate(e){this.props.isBackgroundVideoStopPlayingEnabled&&!e.isBackgroundVideoStopPlayingEnabled&&document.addEventListener("visibilitychange",this.onVisibilityChange)}componentDidMount(){(this.props.isBackgroundThrottleEnabled||this.props.isBackgroundVideoStopPlayingEnabled)&&(this.props.isBackgroundThrottle&&this.props.updateIsBackgroundThrottle(!1),this.props.isForceStopPlaying&&this.props.updateIsBackgroundForceStopPlaying(!1),(0,L.AO)()&&this.launchBackgroundTimer(),document.addEventListener("visibilitychange",this.onVisibilityChange))}componentWillUnmount(){(this.props.isBackgroundThrottleEnabled||this.props.isBackgroundVideoStopPlayingEnabled)&&(document.removeEventListener("visibilitychange",this.onVisibilityChange),this.timer&&clearTimeout(this.timer))}render(){return null}constructor(...e){super(...e),(0,s._)(this,"timer",null),(0,s._)(this,"launchBackgroundTimer",()=>{this.timer=window.setTimeout(()=>{this.props.isBackgroundVideoStopPlayingEnabled?this.props.updateIsBackgroundForceStopPlaying(!0):this.props.isBackgroundThrottleEnabled&&this.props.updateIsBackgroundThrottle(!0),this.timer=null},this.props.backgroundActionDelay)}),(0,s._)(this,"onVisibilityChange",()=>{let e=(0,L.AO)(),{isBackgroundThrottle:t,isForceStopPlaying:i}=this.props;!e||t||i||this.timer||this.launchBackgroundTimer(),!e&&this.timer&&(clearTimeout(this.timer),this.timer=null),!e&&t&&this.props.updateIsBackgroundThrottle(!1),!e&&i&&this.props.updateIsBackgroundForceStopPlaying(!1)})}}let Y=(0,l.$j)(e=>{let t=(0,G.MC)(e),i=(0,G.No)(e),a=(0,h.x)(e),s=(0,u.if)(e);return{isBackgroundThrottle:(0,u.zO)(e),isForceStopPlaying:(0,u.aX)(e),isBackgroundThrottleEnabled:!t&&!i,isBackgroundVideoStopPlayingEnabled:(i&&s||t)&&a,backgroundActionDelay:t||i?1e4:6e4}},z)(q);var Q=i(36886),J=i(76482),X=i(37051),ee=i(91343),et=i(14628),ei=i(35506),ea=i(50557),es=i(41950),er=i(87937),el=i(243),en=i(98371),eo=i(61061),ec=i(51945),ed=i(53514),eu=i(38629),em=i(78021),ep=i(79336),eh=i(29421),ev=i(69497),eE=i(8771),eg=i(5999),eS=i(48015),eC=i(85353),eb=i(4368),ef=i(82349),eT=i(96811),ey=i(15218);let ew=(e,t)=>{let[i,a]=r.useState(e),s=r.useCallback((0,J.Z)(e=>{a(e)},t),[]);return r.useEffect(()=>{s(e)},[e]),i},eP=({isRemote:e,isLoading:t,shouldDelayControlsRendering:i,isPlaying:a,isBlurred:s,onPlayButtonClick:l})=>{let n=r.useMemo(()=>e?t?r.createElement(eC.Z,{isCentered:!0}):a||s?null:r.createElement(eo.Z,{onClick:l}):null,[e,t,a,s,l]),o=ew(n,300);return i&&n?o:n},eN=(0,r.forwardRef)(({videoElement:e,lastSnapshotUrl:t,isWatermark:i,wasPlayed:a,modelName:s,isRemote:l,isPlaying:n,isLoading:c,onTimeUpdate:d,isCollectLogs:m,shouldDelayControlsRendering:p,shouldUseNewControls:v},E)=>{let g=r.useRef(null),S=(0,o.C)(h.tS),C=(0,o.C)(u._V),b=(0,o.C)(u.Bk),f=(0,o.C)(u.$C),T=r.useRef(()=>{});r.useImperativeHandle(E,()=>g.current);let y=r.useRef(null),[w,P]=r.useState(0);r.useEffect(()=>{if(g.current&&e&&C){let{destroy:t}=(0,ey.N)(e,g.current,b,f);T.current=t}else T.current&&T.current();return()=>{T.current&&T.current()}},[f,e,C,b,g]),(0,r.useEffect)(()=>{let t;return S&&e&&requestAnimationFrame(()=>{t=(0,L.Cu)(e)}),()=>{null==t||t()}},[S,e]),(0,ef.Z)(()=>{var t;e&&(null===(t=y.current)||void 0===t||t.updatePosition(),w!==e.currentTime?(P(e.currentTime),eT.Z.playing(),d&&d()):eT.Z.paused())},500),(0,ef.Z)(()=>{e&&m&&B.Z.setFields({width:e.videoWidth,height:e.videoHeight})},1e3);let N=r.useCallback(()=>{(0,eE.zI)().play()},[]);return r.createElement("div",{key:"video_element_wrappper",className:(0,L.AK)("video-element-wrapper",{"video-element-wrapper--loading":c}),ref:g},r.createElement("div",{className:(0,L.AK)("video-element-wrapper-blur",{"with-poster":!a,"with-blur":!0})},t&&r.createElement(eb.s,{src:t,area:"snapshot",username:s})),i&&r.createElement(eg.l,{ref:y,videoElement:e}),v?r.createElement(eP,{isRemote:l,isLoading:c,shouldDelayControlsRendering:p,isPlaying:n,isBlurred:S,onPlayButtonClick:N}):l?c?r.createElement(eC.Z,{isCentered:!0}):n||S?null:r.createElement(eo.Z,{onClick:N}):null,e&&r.createElement(eS.Z.Consumer,null,({registerVideoElement:t})=>{null==t||t(e)}))});var e_=i(53738),ek=i(33491),eA=i(75151),eI=i(25304),eM=i(34342),eR=i(84543),eL=i(20717),eO=i(98459),eU=i(68479),eZ=i(74178);let eB={},eV=()=>{let e=(0,o.C)(eO.Fy);return r.useMemo(()=>{let t=Object.keys(eB);return Object.entries(e).reduce((e,[i,a])=>(a&&t.includes(a)&&(e[i]=eB[a]),e),{})},[e])};var eD=i(32630),eF=i(1210),eW=i(74012),e$=i(97986),ex=i(93776),eH=i(76811),eK=i(52938),eG=i(39975),ej=i(54319);let ez=({mmp:e,shouldRequestPermissions:t=!0,onPermissionsRequested:i})=>{let{mediaStream:a,setConstraints:s,availableVideoDevices:l,availableAudioDevices:c,requestPermissions:d}=e.useUserMedia(),p=(0,n.T)(),{broadcastConfig:h}=(0,o.C)(u.df),v=(0,o.C)(u.Ki),E=(0,o.C)(u.Ur),g=(0,o.C)(ek.TM),S=(0,o.C)(m.yV),C=(0,o.C)(m.Jl),b=(0,o.C)(ej.LZ),f=(0,o.C)(en.Pu),T=(0,o.C)(u.fM),y=(0,o.C)(u.jz),w=r.useRef(),P=r.useMemo(()=>({audioDevices:c,videoDevices:l}),[c,l]),N=r.useCallback(e=>{p((0,j.M7)(e))},[p]);return r.useEffect(()=>{if((l.length||c.length)&&!Object.keys(S).length){let e=(0,eG.K)(f,b,y);!e.videoDeviceId&&(null==l?void 0:l[0])&&(e.videoDeviceId=l[0].deviceId),!e.audioDeviceId&&(null==c?void 0:c[0])&&(e.audioDeviceId=c[0].deviceId),N(e)}},[l,c]),r.useEffect(()=>{let e={audio:{deviceId:S.audioDeviceId||void 0}};ex.L4.isTouchFacingMode&&S.facingMode?e.video={facingMode:S.facingMode}:e.video={deviceId:S.videoDeviceId||void 0},s(e)},[S]),r.useEffect(()=>{t&&!w.current&&(w.current=!0,d(),i&&i())},[d]),r.useEffect(()=>{p((0,eK.Qk)({isMuted:C}))},[C]),r.useEffect(()=>{a&&(a.getAudioTracks().forEach(e=>{e.enabled=!C}),a.getVideoTracks().forEach(e=>{e.enabled=!T}))},[C,T,a]),{settingDevices:P,isBroadcastSettingsVisible:v,isBroadcastMirrored:E,isBroadcastExpandedInCamToCam:g,mediaStream:a,broadcastConfig:h,settings:S,isMuted:C,isCameraDisabled:T,handleBroadcastSettingsChange:N}},eq=!1,eY=({mmpModule:e,shouldShowPip:t})=>{let{playerRef:i}=e.useMouflonPlayer(),a=r.useRef(null),s=r.useRef(null),{settingDevices:l,isBroadcastSettingsVisible:n,broadcastConfig:o,settings:c,mediaStream:d,handleBroadcastSettingsChange:u,isMuted:m,isCameraDisabled:p}=ez({mmp:e,shouldRequestPermissions:!eq,onPermissionsRequested:()=>{eq=!0}}),h=r.useMemo(()=>({videoControllerConfig:{rootElement:a.current,autoplay:!0}}),[a.current]),v=r.useMemo(()=>({userId:null==o?void 0:o.userId,userStreamNameExpiration:null==o?void 0:o.streamNameExpiration}),[o]);return o?r.createElement(r.Fragment,null,r.createElement("div",{className:"web-rtc-broadcasting web-rtc-broadcasting--new",ref:a},r.createElement(e.MouflonPlayer,{playerType:e.EPlayerType.BROADCAST,videoElement:s.current||void 0,isABREnabled:!1,volume:0,MediaStream:d||void 0,WebRTCSignallingUrl:o.streamUrl,WebRTCStreamId:o.streamName,WebRTCPublishCustomData:v,WebRTCACLToken:o.broadcastToken,playerConfig:h,playerRef:i,appKey:o.webRTCAppKey,autoplay:!0}),r.createElement("video",{className:t?"":"hidden",ref:s})),!ex.L4.touch&&r.createElement(eH.Z,{settings:c,devices:l,localStream:d,isBroadcastSettingsVisible:n,changeBroadcastStreamSettings:u,isMuted:m,isCameraDisabled:p})):null},eQ=e=>{let t=(0,o.C)(u.Ki),i=(0,o.C)(u.Ur),a=(0,o.C)(ek.TM),[s,l]=(0,r.useState)(!1),n=(0,r.useCallback)((0,ex.Ds)(e=>{l(e)},1e3),[l]);return((0,r.useEffect)(()=>{n(!!e.shouldRenderCamToCamBroadcast)},[e.shouldRenderCamToCamBroadcast]),e.isWebRTC)?r.createElement("div",{className:"web-rtc-player-wrapper"},r.createElement("div",{className:(0,L.AK)("web-rtc-player",{"cam-to-cam":e.isCamToCam,mirror:i,settings:t&&!ex.L4.touch,"expanded-in-cam-to-cam":a})},r.createElement("div",{className:"web-rtc-content"},r.createElement("div",{className:"web-rtc-content-wrapper"},r.createElement("div",{className:"web-rtc-playing"},r.createElement(eN,{...e,ref:e.playingVideoRootRef})),s&&r.createElement(eY,{shouldShowPip:e.isCamToCam&&e.isVideoEnabled,mmpModule:e.mmpModule}))))):r.createElement("div",{className:"mse-player"},r.createElement(eN,{...e,ref:e.playingVideoRootRef}))},eJ=({playerType:e,wasPlayed:t,lastSnapshotUrl:i,mmpModule:a,onPlaying:s,updateInitializePlayer:l,modelName:c,modelId:p,updatePlayerResolution:v})=>{var E;let g=(0,o.C)(u.Nl),S=(0,o.C)(u.ro),[b,f]=r.useState(""),T=(0,n.T)(),y=r.useRef((0,eE.zI)()),w=(0,e_.Z)(e=>{null==v||v(e.width,e.height)}),P=r.useCallback(e=>{T((0,eA.gi)({error:e.error.message,playerType:e.playerType}))},[T]),N=(0,r.useRef)(!1),[_,k]=r.useState(!1),A=r.useCallback(()=>{N.current=!0,e===d.PLAYER_TYPES.HLS&&g&&(k(!1),f(g))},[e,g]),{playerRef:I,abrPolicy:R,resolutions:L,videoPlaybackState:O,isLoading:U,isPlaying:Z,isErrored:B,isModuleLoading:V,playbackStartType:D}=a.useMouflonPlayer({onPlaying:s,onUpdatePlayerResolution:w,onError:P,onResolutionNotFound:A}),F=(0,o.C)(u.Cj),{playConfig:W,broadcastConfig:$}=(0,o.C)(u.df),x=(0,o.C)(u.PW),{metricsCollectorEndpoint:H,metricsProjectId:K}=(0,o.C)(u.I4),z=(0,o.C)(eO.Aj),q=r.useRef(-1),[Y,Q]=r.useState(null==W?void 0:null===(E=W.preset)||void 0===E?void 0:E.presetQuality),[J,X]=r.useState(F.value),ee=(0,o.C)(u.nc),et=eV(),ei=(0,o.C)(u.jq),ea=(0,o.C)(h.UP),es=(0,o.C)(ek.TM),er=(0,o.C)(u.Xy),el=(0,o.C)(eW.rc),en=(0,o.C)(u.fM),eo=(0,o.C)(m.Jl),ec=(0,o.C)(u.Bl),ed=(0,o.C)(u.zO),eu=(0,o.C)(G.gn),em=(0,o.C)(h.Fx),ep=(0,r.useRef)(),[eh,ev]=(0,r.useState)(!0),eg=(0,o.C)(u.Nt),eS=(0,o.C)(u.$C),eC=(0,eD.c)({isCanvasEnabledByFeature:er,isPlaying:Z,isLoading:U,streamId:p}),eb=(0,o.C)(u.ou),ef=(0,o.C)(u.pS),eT=(0,o.C)(u.Cj),ey=(0,o.C)(G.Ko),ew=r.useRef(null),eP=r.useMemo(()=>e===d.PLAYER_TYPES.WEBRTC?a.EPlayerType.WEBRTC:eU.iC?a.EPlayerType.NATIVE:a.EPlayerType.HLS,[a,e]);r.useEffect(()=>{"auto"===D&&T((0,eM.u)())},[T,D]),r.useEffect(()=>{eP===a.EPlayerType.WEBRTC&&T((0,j.G4)(eF.p.WEBRTC_RISTRETTO)),T((0,j.G4)(eP===a.EPlayerType.NATIVE?eF.p.NATIVE:eF.p.DOPPIO))},[T,a.EPlayerType,eP]),r.useEffect(()=>{if(U)return()=>{k(!0)}},[U]),r.useEffect(()=>{k(!1)},[p,e]),r.useEffect(()=>{var t,i,a;if(!L.length)return;let s=null===(t=(0,eL.en)(L[0].url||""))||void 0===t?void 0:t.hostname;if(s){let e=s.indexOf("hls-"),t=null===(i=s.split(".")[0])||void 0===i?void 0:i.substr(e);T((0,eI.M3)(t))}let r=q.current,l=M.BROWSER_CAPABILITIES.isMobile?ee.startMobileResolution:ee.startDesktopResolution,n=(0,m.Fm)(l,L.map((e,t)=>({value:parseInt(e.name,10),index:t}))).index||0;if(r){let e=Array.from(L).sort((e,t)=>t.bitrate-e.bitrate)[0],t=r>=((null==e?void 0:e.bitrate)||0),i=eT&&ey?L.findIndex(e=>e.name===eT.presetQuality):-1,a=t?L.findIndex(t=>t.bitrate===e.bitrate):L.findIndex(e=>e.bitrate+1e5>=r&&r>=e.bitrate-1e5);if(i>=0)n=i;else if(a>=0)n=a;else{let e=L.reduce((e,t,i)=>r?r<=t.bitrate&&(!e||r>=t.bitrate)?{level:i,bitrate:t.bitrate}:e:null,null);n=(null==e?void 0:e.level)||n}}if(n||0===n||(n=L.findIndex(e=>`${e.height}p`===d.cC)),null!==n){let t=L[n].name;X(t),e===d.PLAYER_TYPES.HLS&&(null===(a=I.current)||void 0===a||a.setResolutionByName(t))}},[e,I,T,ee,L]),r.useEffect(()=>{N.current&&(k(!1),N.current=!1),ey&&!eS?f(S||""):(k(!1),f(g||""))},[g,S,ey,eS]);let eN=r.useMemo(()=>{var e;return(null==W?void 0:null===(e=W.preset)||void 0===e?void 0:e.type)===C.rdN},[W]),eB=r.useCallback(()=>{if(y.current){let{videoHeight:e}=y.current;if(eN&&!ed&&e!==ep.current){let t=e?`${e}p`:null;t&&T((0,e$.wb)(t))}ep.current=e}},[T,y,ed,eN]);r.useEffect(()=>{var e,t;(null==W?void 0:null===(e=W.preset)||void 0===e?void 0:e.name)&&(null==W?void 0:null===(t=W.preset)||void 0===t?void 0:t.name)!==Y&&Q(W.preset.type===C.pgl?C.pgl:W.preset.presetQuality||W.preset.quality)},[Y,W]),r.useEffect(()=>{(0,eR.p)(R,eZ.jI)&&T((0,j.LV)(R))},[T,R]),r.useEffect(()=>{var e;null===(e=I.current)||void 0===e||e.start()},[I]);let ex=r.useMemo(()=>({isMobile:M.BROWSER_CAPABILITIES.isMobile,streamType:em}),[em]),eH=r.useMemo(()=>{var t;let i=e===d.PLAYER_TYPES.WEBRTC?"video-element web-rtc-video-element":"video-element";return{autoplay:!0,webRTCConfig:{abrControllerConfig:eu?{isNewAbr:!0,...eg}:{isNewAbr:!1},streamDispatcherConfig:{startResolution:null==W?void 0:null===(t=W.preset)||void 0===t?void 0:t.presetQuality,isFastStartEnabled:ec},broadcastDispatcherConfig:{enableBackendStreamQualityRecognition:eb},peerConnectionConfig:{playoutDelayHint:(null==W?void 0:W.playoutDelayHint)||void 0}},hlsConfig:{playlistLoader:{partHoldBack:ef},bufferStallsDetector:{bufferAmountToDetectStall:ey?.3:void 0},bufferController:{recreateSourceBufferOnResolutionChange:ey&&M.BROWSER_CAPABILITIES.safari},resolutionsManager:{useFallbackResolutionIfResolutionNotFound:!ey&&void 0}},videoControllerConfig:{rootElement:ew.current,minimalPossibleVideoDimension:50,shouldUseCanvas:eC,canvasElementClassName:i,videoElementClassName:i,isNonAnonymous:!0,isRemote:!0,autoplay:!0}}},[W,e,J,ew.current,eC,ec,eb]);r.useEffect(()=>{l()},[l]),(0,r.useEffect)(()=>{ev(!0)},[e]),(0,r.useEffect)(()=>{V||ev(!1)},[V]),(0,r.useEffect)(()=>{ea||T((0,j.UK)(!1))},[ea,T]);let eK=U||B||!O;return r.createElement(a.MouflonPlayer,{videoElement:y.current,HLSStreamUrl:b,NativeStreamURL:g||void 0,WebRTCStreamId:null==W?void 0:W.streamName,WebRTCSignallingUrl:null==W?void 0:W.streamUrl,WebRTCACLToken:null==W?void 0:W.token,playerType:eP,playerRef:I,isABREnabled:eN,WebRTCQuality:Y,quality:ey&&!eU.iC?eT.presetQuality:void 0,playerConfig:eH,abrPresets:x,volume:ei,metricsProjectId:K,metricsCollectionEndpoint:H,appKey:"callbackApp",abTests:z,abTestsSupport:et,additionalMetricFields:ex},r.createElement(eQ,{mmpModule:a,playingVideoRootRef:ew,lastSnapshotUrl:i,isLoading:eK,isPlaying:Z,wasPlayed:t,isRemote:!0,modelName:c,videoElement:y.current,isWatermark:!(ea&&es),onTimeUpdate:eB,isCollectLogs:!0,isVideoEnabled:!en,isCamToCam:ea,shouldUseNewControls:ey,shouldDelayControlsRendering:_,shouldRenderCamToCamBroadcast:!!(ea&&$&&el&&!eh&&(!en||!eo)),isWebRTC:e===d.PLAYER_TYPES.WEBRTC}))},eX=e=>{let[t,i]=r.useState(null),a=(0,o.C)(eh.lw),s=(0,o.C)(eh.iv),l=(0,n.T)(),{version:c,maxAttemptsToLoad:d,isEnabled:m,sourceOrigin:p}=(0,o.C)(u.u4);return r.useEffect(()=>{(0,ev.K5)({isExternalSourceEnabled:m,externalVersion:c,externalSourceOrigin:p,maxAttempts:d}).then(({module:e,localModuleLoaderWasUsed:t})=>{e&&(l((0,j.pF)({playerWasLoadedFromExternalSource:!t,playerVersion:t?void 0:c,isMMP:!0})),i(e))})},[]),t?r.createElement(eJ,{...e,mmpModule:t,modelName:a,modelId:s}):r.createElement(eN,{lastSnapshotUrl:e.lastSnapshotUrl,isLoading:!1,isPlaying:!1,wasPlayed:!1,modelName:a,isRemote:!0})},e0=["scroll","mousemove","pointerdown","keydown"];class e1 extends r.PureComponent{componentDidMount(){this.props.isMediaPage&&e0.forEach(e=>document.addEventListener(e,this.handleFirstInteraction)),this.props.updateHLSStreamEndedState(!1),this.removeAudioStartListener=es.KY.subscribePlayAudioEvent(e=>{e.detail.playerId!==this.VideoPlayerId&&this.props.togglePlayerAvailability(!1)})}componentDidUpdate(e){var t,i,a;this.updateDocumentVisibilityState(e,this.props),(null==e?void 0:null===(t=e.model)||void 0===t?void 0:t.id)!==(null===(a=this.props)||void 0===a?void 0:null===(i=a.model)||void 0===i?void 0:i.id)&&this.setState({wasPlayed:!1})}componentWillUnmount(){var e;this.updateInitializePlayer&&this.updateInitializePlayer.cancel(),null===(e=this.removeAudioStartListener)||void 0===e||e.call(this),this.props.updateInitializePlayer(!1),this.clearTimeout(),e0.forEach(e=>document.removeEventListener(e,this.handleFirstInteraction))}static getDerivedStateFromError(){return{isFailed:!0}}componentDidCatch(e,t){ei.ZP.error(e,t),this.props.apiLog("error","playerFailed",{error:e.toString(),errorInfo:t,isMMP:!0})}render(){return this.state.isFailed?r.createElement(ed.Z,null):r.createElement(eu.default,{className:(0,L.AK)("player",ep.j.player,this.props.className)},r.createElement(ec._,null),this.renderPlayerContent(),r.createElement(et.P,{className:"player__player-controls"}),this.renderStreamController())}constructor(e){super(e),(0,s._)(this,"lastScrollY",0),(0,s._)(this,"updateInitializePlayer",(0,J.Z)(()=>{this.props.updateInitializePlayer(!0)},500)),(0,s._)(this,"removeAudioStartListener",void 0),(0,s._)(this,"VideoPlayerId",`WebRTC${(0,ee.x0)()}`),(0,s._)(this,"timeoutId",void 0),(0,s._)(this,"handleFirstInteraction",e=>{if("scroll"===e.type&&this.lastScrollY<=window.scrollY){this.lastScrollY=window.scrollY;return}this.setState({isAfterUserInteraction:!0}),e0.forEach(e=>document.removeEventListener(e,this.handleFirstInteraction))}),(0,s._)(this,"clearTimeout",()=>{void 0!==this.timeoutId&&clearTimeout(this.timeoutId)}),(0,s._)(this,"handlePlaying",()=>{this.state.wasPlayed||(this.setState({wasPlayed:!0}),this.props.onPlaying(),this.props.updateHLSStreamEndedState(!1))}),(0,s._)(this,"togglePlayerAvailabilityIfNeeded",({isDocumentVisible:e,isInPrivate:t,isBlurVideoOnPrivate:i})=>{if(M.BROWSER_CAPABILITIES.isMobile||M.BROWSER_CAPABILITIES.isTablet){if(e||i){this.clearTimeout();return}t?this.timeoutId=setTimeout(()=>this.props.togglePlayerAvailability(!1),6e4):this.props.togglePlayerAvailability(!1)}}),(0,s._)(this,"updateDocumentVisibilityState",(e,t)=>{let{isDocumentVisible:i}=t;(0,$.gk)(e,t)&&(i&&this.setState({isDocumentVisible:i}),this.togglePlayerAvailabilityIfNeeded(t))}),(0,s._)(this,"handlePlayClick",()=>{es.KY.emitPlayAudioEvent(this.VideoPlayerId),this.props.togglePictureInPicture(!1),this.props.togglePlayerAvailability(!0),this.props.updateDocumentVisibility()}),(0,s._)(this,"handleHLSStreamEnded",()=>{this.props.updateHLSStreamEndedState(!0)}),(0,s._)(this,"handleHLSStreamRestored",()=>{this.props.isHLSStreamWasEnded&&this.props.updateHLSStreamEndedState(!1)}),(0,s._)(this,"renderPlayer",()=>{let{lastSnapshotUrl:e,volume:t,playerType:i,isPlayerAvailability:a,isPictureInPicture:s,isMediaPage:l,isBackgroundForceStopPlaying:n}=this.props,{isDocumentVisible:o,isAfterUserInteraction:c}=this.state;return!o||!a||s||n||l&&!c?r.createElement(eo.Z,{onClick:this.handlePlayClick}):(0,er.sk)()?r.createElement(r.Fragment,null):r.createElement(eX,{onPlaying:this.handlePlaying,wasPlayed:this.state.wasPlayed,lastSnapshotUrl:{lastSnapshotUrl:e,volume:t}.lastSnapshotUrl,updateInitializePlayer:this.updateInitializePlayer,updatePlayerResolution:this.props.updatePlayerResolution,playerType:i})}),(0,s._)(this,"renderStreamController",()=>{let{playerType:e}=this.props;return e===d.PLAYER_TYPES.WEBRTC||e===d.PLAYER_TYPES.HLS?r.createElement(em.Z,null):null}),(0,s._)(this,"renderPlayerContent",()=>r.createElement(ea.s,null,this.renderPlayer())),this.state={wasPlayed:!1,isDocumentVisible:this.props.isDocumentVisible,isFailed:!1,isAfterUserInteraction:!this.props.isMediaPage}}}(0,s._)(e1,"defaultProps",{isLoggedIn:!1,isInCam2Cam:!1,isInPrivate:!1,isPictureInPicture:!1,lastSnapshotUrl:"",playerType:void 0,volume:0,onPlaying:X.Z,isHLSStreamWasEnded:!1});let e2={togglePlayerAvailability:p.X6,updatePlayerType:p.$5,updateInitializePlayer:j.kV,updateDocumentVisibility:w.uP,togglePictureInPicture:j.x0,apiLog:ei.t$,updateHLSStreamEndedState:p.zH,setEmulatePlayerCrashState:j.LA},e6=(0,l.$j)(e=>{let{auth:{isLoggedIn:t,isLoggingOut:i},viewCam:{model:a,isPlayerAvailability:s},ui:{isDocumentVisible:r},player:{isBroadcastSettingsVisible:l}}=e,n=(0,h.IW)(e);return{isDocumentVisible:!!r,isBroadcastSettingsVisible:l,isLoggedIn:t&&!i,isInCam2Cam:n&&(0,h.UP)(e),isInPrivate:n,model:a,isMediaPage:(0,el.HK)(e),playerType:(0,u.Aq)(e),isPlayerAvailability:s,volume:(0,u.Sf)(e),isPictureInPicture:(0,m.bd)(e),isHLSStreamWasEnded:(0,eh.pc)(e),deviceType:(0,en.y$)(e),crashEmulateState:(0,m.jU)(e),isBackgroundForceStopPlaying:(0,u.aX)(e),isBlurVideoOnPrivate:(0,u.$C)(e)}},e2)(e1);var e8=i(18984);let e3=e=>{let t=(0,o.C)(u.l2);return(0,Q.t)()?t?r.createElement(e6,e):r.createElement(e8.ZP,e):null};var e7=i(29413),e9=i(97606);let e4=()=>{let{trans:e}=(0,e9.QT)();return r.createElement("div",{className:"player-shutter"},r.createElement(e7.Z,{img:"no-video"}),r.createElement("div",{className:"text-wrapper"},e("playerErrors.outdatedBrowser")))};var e5=i(87489),te=i(66483),tt=i(32284),ti=i(10269),ta=i(29502),ts=i(62735),tr=i(51932),tl=i(4359),tn=i(65804);let to=(0,l.$j)(e=>({joinedUsers:(0,h.xO)(e),timeRemaining:(0,h.g9)(e),isTicketShow:(0,h.yY)(e)}))(e=>{let{joinedUsers:t,timeRemaining:i,isTicketShow:a}=e,s=a?"ticketShowAnnouncement":"groupShowAnnouncement";return r.createElement("div",{className:"group-show-announce"},r.createElement("div",{className:"group-show-announce-head"},r.createElement("div",{className:"group-show-announce-title"},r.createElement(tn.Z,{messageId:`viewCam.${s}.${i<=60?"lastMinuteWarning":"groupShowAnnounced"}`,elements:{strong:r.createElement("strong",null)}})),!!t&&r.createElement(tn.Z,{messageId:`viewCam.${s}.joinedUsers`,className:"group-show-announce-subtitle",choiceParameter:"joinedUsers",parameters:{joinedUsers:t}})),r.createElement(tl.Z,null))});var tc=i(71328),td=i(46424),tu=i(11850),tm=i(99382),tp=i(61171),th=i(43806);let tv={emitButtonEvent:P.d2,addGroupShowAnnouncementMessage:td.wG,addGroupShowMessageStartInNMinutes:tc.gf},tE=(0,_.H)("isLayoutUpToS")((0,l.$j)(e=>({groupShowStartTime:(0,h.NN)(e),isGroupShowSlotReserved:(0,h.r_)(e),isTicketShow:(0,h.yY)(e),isTicketShowPaid:(0,h.Ke)(e)}),tv)(({groupShowStartTime:e,isGroupShowSlotReserved:t,isTicketShowPaid:i,isLayoutUpToS:a,isTicketShow:s,className:l,emitButtonEvent:n,addGroupShowAnnouncementMessage:o,addGroupShowMessageStartInNMinutes:c})=>{let[d,u]=(0,tu.eW)(),m=(0,r.useRef)(null),p=(0,r.useCallback)(e=>{n(M.FO.GROUP_SHOW_DROPDOWN_TOGGLER,{isVisible:d,isLayoutUpToS:a}),u(e)},[a,d,u,n]),h=s?"ticketShow":"groupShow",v=function({isGroupShowSlotReserved:e,isTicketShowPaid:t,isTicketShow:i}){return e||t?"check-1":i?"ticket":"group"}({isGroupShowSlotReserved:t,isTicketShowPaid:i,isTicketShow:s});return r.createElement("div",{className:"group-show-control",ref:m},r.createElement(tm.ZP,{className:(0,L.AK)(l,"group-show-btn"),style:"outline",onClick:p},r.createElement(e7.Z,{img:v}),r.createElement(tn.Z,{messageId:`privateModes.${h}.announcementTimerButton`,elements:{timer:r.createElement(th.Z,{className:"private-show-timer",endTime:e,ticks:{301:()=>{c(5,!0)},601:()=>{c(10,!0)},60:()=>{o({isLastMinute:!0})}}}),accent:r.createElement("span",{className:"pale"}),strong:r.createElement("strong",null)}})),!a&&r.createElement(tp.Z,{initiatorRef:m,position:"top",spaced:!0,stateValueGetter:()=>d,contentClassName:"group-show-btn__dropdownContent"},r.createElement(to,null)))}));var tg=i(29409),tS=i(15734),tC=i(99992),tb=i(38924),tf=i(44589),tT=i(18375),ty=i(57174),tw=i(56851),tP=i(3478),tN=i(2149),t_=i(86811),tk=i(23283),tA=i(47742),tI=i(17353),tM=i(79455),tR=i(49055),tL=i(93223),tO=i(65103),tU=i(90813),tZ=i(52812),tB=i(80167),tV=i(51255);let tD=({onClick:e,size:t="large"})=>{let i=(0,n.T)();return(0,tB.a)("KeyT",()=>{e(),i((0,tr.Y0)(!0))}),r.createElement(ty.ZP,{className:"view-cam-controls-btn view-cam-controls__private-tip-button",onClick:e,style:"gold-ds",size:t},r.createElement(tV.t,{shortTextId:"button.sendPrivateTipShort",textId:"button.sendPrivateTip"}))};var tF=i(1961),tW=i(48068),t$=i(69353),tx=i(47722),tH=i(40108),tK=i(7914),tG=i(80176);let tj=({model:e})=>{let{trans:t}=(0,e9.QT)(),i=(0,n.T)(),{isSubscribed:a,tier:s}=(0,o.C)(h.Y4);return r.createElement(tx.mI,{className:"subscriptions-control-panel__button",onClick:()=>{i((0,tG.sb)(`/${e.username}/${tK.pt}`))}},a?r.createElement(tH.g,{tier:s,size:20}):r.createElement(e7.Z,{className:"subscriptions-control-panel__icon",img:"diamond"}),r.createElement("span",{className:"subscriptions-control-panel__button-label"},t(a&&s?C.HN4[s]:"fanClub.user.joinFanClub")))};var tz=i(12710);let tq=(0,r.createContext)(void 0),tY=(0,r.createContext)(void 0),tQ=()=>{let e=(0,r.useContext)(tq);return e?e.favoritedCount:(ei.ZP.error("useFavoritedCount must be used inside SubscriptionsControlStateContext context"),0)},tJ=()=>{let e=(0,r.useContext)(tq);return e?e.isInFavorites:(ei.ZP.error("useIsInFavorites must be used inside SubscriptionsControlStateContext context"),!1)},tX=()=>{let e=(0,r.useContext)(tq);return e?e.panelStatus:(ei.ZP.error("usePanelStatus must be used inside SubscriptionsControlStateContext context"),"closed")},t0=()=>{let e=(0,r.useContext)(tY);return e?e.setPanelStatus:(ei.ZP.error("useSetPanelStatus must be used inside SubscriptionsControlActionsContext context"),X.Z)},t1=()=>{let e=(0,r.useContext)(tY);return e?e.toggleFavorite:(ei.ZP.error("useToggleFavorite must be used inside SubscriptionsControlActionsContext context"),X.Z)},t2=()=>{let{trans:e}=(0,e9.QT)(),t=t0(),i=t1(),a=(0,o.C)(h.D);return r.createElement(tx.mI,{className:"subscriptions-control-panel__button subscriptions-control-panel__favorited-button",onClick:()=>{i(),t("hidden")}},r.createElement(e7.Z,{className:"subscriptions-control-panel__icon subscriptions-control-panel__favorited-icon",img:"heart-fill"}),r.createElement("span",{className:"subscriptions-control-panel__button-label"},e("viewCam.subscriptionsControl.favorited")),r.createElement("span",{className:"subscriptions-control-panel__button-info"},(0,tz.ER)(a)))},t6=()=>r.createElement("div",{className:"button-pointer__outer"},r.createElement("div",{className:"button-pointer__inner"})),t8=({onClick:e,isNotificationsControlVisible:t,isUserSubscribed:i})=>{let{trans:a}=(0,e9.QT)();return r.createElement(tx.mI,{className:(0,L.AK)("subscriptions-control-panel__button subscriptions-control-panel__following-button",{"subscriptions-control-panel--subscribed":i}),onClick:e},r.createElement(e7.Z,{img:i?"notifications-2":"notifications-off-2",className:"subscriptions-control-panel__icon"}),r.createElement("span",{className:"subscriptions-control-panel__button-label"},a(i?"viewCam.subscriptionsControl.following":"button.notifyMe")),t&&r.createElement(t6,null))},t3=()=>{let e=tX(),[t,i]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{"openedFirstTime"===e&&i(!0),"closed"===e&&i(!1)},[e]),{isNotificationsControlVisible:t,setIsNotificationsControlVisible:i,currentPanelStatus:e}},t7=()=>{let e=(0,n.T)(),t=(0,o.C)(eh.T2),{shouldShow:i}=(0,o.C)(h.Y4),a=(0,o.C)(e=>!!t&&(0,t$.LW)(e,t.id)),{isNotificationsControlVisible:s,setIsNotificationsControlVisible:l,currentPanelStatus:c}=t3();return t&&"hidden"!==c?r.createElement("div",{className:(0,L.AK)("subscriptions-control-panel",{closed:"closed"===c})},["opened","openedFirstTime"].includes(c)&&r.createElement("div",{className:(0,L.AK)("subscriptions-control-panel__icons-panel",{"with-three-button":i})},r.createElement(t8,{onClick:()=>{a||e((0,tF.oj)({model:t,buttonLocation:"PushNotificationPopupOnAddedToFavs"})),(!s||a)&&l(e=>!e)},isNotificationsControlVisible:s,isUserSubscribed:a}),r.createElement("div",{className:"subscriptions-control-panel__icons-divider"}),r.createElement(t2,null),i&&r.createElement(r.Fragment,null,r.createElement("div",{className:"subscriptions-control-panel__icons-divider"}),r.createElement(tj,{model:t}))),s&&r.createElement(tW.Z,{className:"subscriptions-control-panel__notifications-tooltip",key:String(null==t?void 0:t.id),buttonLocation:"PushNotificationPopupOnAddedToFavs",model:t,isMobile:!0,onClose:()=>{l(!1)},isVisible:!0,shouldMethodsListBeExpanded:!0})):null},t9=()=>{let e=(0,o.C)(tb.AI),t=(0,o.C)(eh.iv),[i,a]=(0,r.useState)("closed");return(0,r.useEffect)(()=>{a(e?"hidden":"closed")},[e]),(0,r.useEffect)(()=>{a(e=>"hidden"===e?"hidden":"closed")},[t]),[i,a]},t4=({isInFavoritesFromServer:e,favoritedCountFromServer:t,favoritesClickHandler:i})=>{let[a,s]=(0,r.useState)(t),[l,n]=(0,r.useState)(e);(0,r.useEffect)(()=>{n(e)},[e]),(0,r.useEffect)(()=>{s(t)},[t]);let o=(0,J.Z)(i,200);return{favoritedCount:a,isInFavorites:l,toggleFavorite:()=>{n(e=>!e),s(e=>l?e-1:e+1),o()}}},t5=({children:e,isInFavoritesFromServer:t,favoritedCountFromServer:i,favoritesClickHandler:a})=>{let[s,l]=t9(),{favoritedCount:n,isInFavorites:o,toggleFavorite:c}=t4({isInFavoritesFromServer:t,favoritedCountFromServer:i,favoritesClickHandler:a}),d=(0,r.useMemo)(()=>({panelStatus:s,favoritedCount:n,isInFavorites:o}),[s,n,o]),u=(0,r.useMemo)(()=>({setPanelStatus:l,toggleFavorite:c}),[l,c]);return r.createElement(tq.Provider,{value:d},r.createElement(tY.Provider,{value:u},e))};var ie=i(56802);let it=()=>{let e=tX(),t=t0(),i="closed"===e;return r.createElement(tx.mI,{className:(0,L.AK)("subscriptions-control-toggle"),onClick:()=>{t(i?"opened":"closed")}},r.createElement(e7.Z,{img:"chevron-right",className:(0,L.AK)("subscriptions-control-toggle__icon",{closed:i})}))};var ii=i(3034),ia=i(62663),is=i(52913),ir=i(76919),il=i(28656);let io=(e,t)=>{(0,il.L)(()=>{let i=null==e?void 0:e.current;if(!t||!i)return;let a=Object.keys(t),s=(0,is.Z)(getComputedStyle(i),a);i.style.transition="unset",Object.assign(i.style,t);let r=new Set(a);setTimeout(()=>{i.addEventListener("transitionend",e=>{if(r.delete((0,ir.p)(e.propertyName)),!r.size){let e=a.reduce((e,t)=>(e[t]="",e),{});Object.assign(i.style,e)}}),i.style.transition="",Object.assign(i.style,s)})},[])},ic=({favoritedCount:e,className:t})=>r.createElement("div",{className:(0,L.AK)("favorited-count",t)},(0,tz.uf)(e,1)),id=({favoritedCount:e,favoritesClickHandler:t,canAddToFavorite:i,innerRef:a,stylesToAnimate:s})=>{let{trans:l}=(0,e9.QT)(),c=(0,o.C)(tb.AI),d=(0,o.C)(G.gN),u=(0,n.T)(),{isLayoutUpToS:m,isLayoutUpToDesktop:p}=(0,ia.do)("isLayoutUpToS","isLayoutUpToDesktop"),h=t0(),[v,E]=(0,r.useState)(!1),g=(0,r.useRef)(null);return io(a,s),r.createElement("div",{className:(0,L.AK)("add-to-favorite-control",{animated:v})},!p&&r.createElement(ii.Z,{placement:"top-start",targetRef:g,gap:22,isForcePlacement:!0,className:"add-to-favorite-control__tooltip",innerClassName:"add-to-favorite-control__tooltip-inner"},l("button.addToFavorites")),r.createElement(tx.mI,{"aria-label":l("button.addToFavorites"),className:(0,L.AK)("add-to-favorite-control__toggle",{"add-to-favorite-control__toggle-new":d}),disabled:!i,onClick:()=>{if(E(!0),c&&u((0,ti.fO)()),m){t(),h("openedFirstTime");return}setTimeout(()=>{t()},150)},ref:g},!d&&r.createElement(e7.Z,{className:(0,L.AK)("add-to-favorite-control__favorite-icon add-to-favorite-control__favorite-icon--mobile"),img:"heart-fill"}),r.createElement(e7.Z,{className:(0,L.AK)("add-to-favorite-control__favorite-icon  add-to-favorite-control__favorite-icon--desktop",{"add-to-favorite-control__favorite-icon-new":d}),img:v?"heart-fill":"heart-2"})),r.createElement(ic,{favoritedCount:e,className:"add-to-favorite-control__favorited-count"}))};var iu=i(59374),im=i(46675);let ip=()=>{let e=(0,r.useRef)(null),t=(0,n.T)(),[i,a]=(0,r.useState)(!1),s=(0,o.C)(eh.T2),l=(0,o.C)(e=>(0,t$.LW)(e,null==s?void 0:s.id)),c=(0,o.C)(x.dx),d=(0,r.useRef)(c);d.current=c,(0,r.useEffect)(()=>{i&&t((0,P.Vg)(!0))},[t,i]);let u=(0,e_.Z)(()=>t((0,P.Vg)(!1)));(0,r.useEffect)(()=>()=>{d.current&&u()},[u]);let m=(0,im.t)(()=>{t_.P4.has(iu.W)||u()},!c);return(0,r.useEffect)(()=>{var t;let i;let a=null===(t=e.current)||void 0===t?void 0:t.tooltipRef;return c&&l&&(i=setTimeout(()=>{if(!a)return;let e=a.getBoundingClientRect();a.style.top=`-${e.height}px`,a.style.bottom="initial"},300)),()=>{let e=null==a?void 0:a.getBoundingClientRect();i&&e&&e.height<150&&clearTimeout(i)}},[l,c]),(0,r.useEffect)(()=>{c||requestAnimationFrame(()=>{var t;(null===(t=e.current)||void 0===t?void 0:t.tooltipRef)&&(e.current.tooltipRef.style.top="initial",e.current.tooltipRef.style.bottom="100%")})},[c]),{tooltipRef:e,toggleNotificationTooltip:e=>{m(e),a(!1);let r=i&&c,n=c&&!l;r||n||t((0,P.Vg)(!c)),l||t((0,tF.oj)({model:s,buttonLocation:"PushNotificationPopupOnAddedToFavs"}))},isNotificationTooltipVisible:c,preventClose:m,hideNotificationTooltip:u}},ih=({onClick:e,isAnimated:t,className:i})=>{let[a,s]=(0,r.useState)(!1);return r.createElement(tx.mI,{className:(0,L.AK)("broken-heart-button",{animated:t,hoverable:a,[i||""]:!!i}),onClick:e,onMouseEnter:e=>{e.relatedTarget!==window&&s(!0)}},r.createElement("div",{className:"broken-heart-button__left-icon"}),r.createElement("div",{className:"broken-heart-button__right-icon"}))},iv=({favoritedCount:e,hasJustBeenAddedToFavorite:t,onFavoriteButtonClick:i,stylesToAnimate:a,innerRef:s,toggleNotificationTooltip:l})=>{let c=(0,n.T)(),d=(0,o.C)(eh.T2),u=(0,o.C)(e=>(0,t$.LW)(e,null==d?void 0:d.id)),[m,p]=(0,r.useState)(!1);return io(s,a),(0,r.useEffect)(()=>{t&&c((0,P.Vg)(!0))},[c,t]),r.createElement("div",{className:(0,L.AK)("subscriptions-control-button-group",{animated:m}),ref:s},r.createElement(ih,{onClick:()=>{p(!0),setTimeout(()=>{i()},200)},isAnimated:m}),r.createElement("span",{className:"subscriptions-control-button-group__counter"},(0,tz.uf)(e,1)),r.createElement("div",{className:"subscriptions-control-button-group__divider"}),r.createElement(tx.mI,{onClick:l,className:(0,L.AK)("subscriptions-control-button-group__notification-button",{active:u})},r.createElement(e7.Z,{img:u?"notifications-2":"notifications-off-2",className:"subscriptions-control-button-group__notification-icon"})))},iE=()=>r.createElement("div",{className:"broken-heart-icons-preloader"}),ig=({showAnnounced:e,canAddToFavorite:t})=>{let i=tX(),a=(0,r.useRef)(null),s=(0,r.useRef)(null),l=(0,n.T)(),{toggleNotificationTooltip:c,tooltipRef:d,isNotificationTooltipVisible:u,hideNotificationTooltip:m,preventClose:p}=ip(),[h,v]=(0,r.useState)(!1),E=(0,o.C)(eh.T2);(0,r.useEffect)(()=>{h&&l((0,P.Vg)(!0))},[l,h]);let[g,S]=(0,r.useState)(),C=t1(),b=tJ(),f=tQ();return r.createElement("div",{className:"favorite-control"},r.createElement("div",{className:"favorite-control__mobile"},b&&t&&"hidden"!==i&&r.createElement(it,null)),r.createElement("div",{className:"favorite-control__desktop"},b&&t&&r.createElement(iv,{innerRef:a,stylesToAnimate:g,onFavoriteButtonClick:()=>{if(a.current){let e=getComputedStyle(a.current);S({backgroundColor:e.backgroundColor,width:e.width})}C()},favoritedCount:f,hasJustBeenAddedToFavorite:h,toggleNotificationTooltip:c}),E&&r.createElement(ie.R,{onClick:p,onClose:m,buttonLocation:"PushNotificationPopupOnAddedToFavs",model:E,isVisible:u,gap:20,absolutePlacement:"top",shouldMethodsListBeExpanded:u&&!h,tooltipRef:d,shouldRenderWithoutPortal:!0})),(!b||!t)&&r.createElement(id,{stylesToAnimate:g,canAddToFavorite:t,favoritedCount:f,favoritesClickHandler:()=>{if(s.current){let e=getComputedStyle(s.current);S({backgroundColor:e.backgroundColor,width:e.width})}v(!0),C()},showAnnounced:e,innerRef:s}),r.createElement(iE,null))};var iS=i(65631),iC=i(45216),ib=i(23766),iT=i(60765);let iy={ADD:"Add",PROCESSING:"Processing",DECLINED:"Declined",SUCCESS:"Success",BUY:"Buy"},iw=({isOwnShow:e,model:t={},groupShowMode:i})=>{var a,s,r;if(!t)return 0;let l=t.status;return l===C.hBS.MODE_PRIVATE||l===C.hBS.MODE_VIRTUAL_PRIVATE?null!==(a=e?t.privateRate:t.spyRate)&&void 0!==a?a:0:l===C.hBS.MODE_P2P||l===C.hBS.MODE_P2P_AUDIO?null!==(s=t.p2pRate)&&void 0!==s?s:0:l===C.hBS.MODE_GROUP_SHOW&&"perMinute"===i&&null!==(r=t.groupRate)&&void 0!==r?r:0},iP=(e,t)=>{if(!t)return null;let[i,a="00"]=(e/t).toString().split("."),s=parseInt(i,10),r=Math.floor(60*parseFloat(`0.${a}`)).toString();return`0${s}:${1===r.length?"0":""}${r}`},iN=({phase:e})=>e===iy.BUY||e===iy.ADD;class i_ extends r.Component{componentWillUnmount(){this.hide()}componentDidUpdate(e){(0,U.Z)(this.propsUpdateToActionsMap,e,this.props)}componentDidMount(){(0,U.Z)(this.propsUpdateToActionsMap,{},this.props)}updatePanelState({timeLeft:e,isVisible:t,isAvailable:i}){if(i&&!t){this.show(e);return}!i&&t&&iN(this.state)&&this.hide()}renderOneClickAdd(e){let{timeLeft:t}=this.state,{isMobile:i,isLightTheme:a,i18n:{trans:s}}=this.props,l=i?"mobile":"desktop",n=(0,tz.W3)(e.currencySum,e.currencyCode);return r.createElement(r.Fragment,null,r.createElement("div",{className:"one-click-recharge-layer-left"},r.createElement(e7.Z,{className:"one-click-recharge-icon",img:a?"tokens-lightning-black":"tokens-lightning"}),r.createElement("div",null,r.createElement("div",{className:"one-click-recharge-title"},r.createElement(tn.Z,{elements:{highlighted:r.createElement("span",{className:"highlighted-brand"}),hiddenForXs:r.createElement("span",{className:"media-up-to-xs-hidden"}),visibleForXs:r.createElement("span",{className:"media-after-xs-hidden"})},parameters:{time:null!=t?t:""},messageId:`oneClickRecharge.addTokens.${l}.title`})),r.createElement("div",{className:"one-click-recharge-description"},s(`oneClickRecharge.addTokens.${l}.description`)))),r.createElement("div",{className:"one-click-recharge-layer-right"},r.createElement("div",null,r.createElement(tm.ZP,{style:"apply-alter2",onClick:this.addTokensClickHandler},r.createElement(tn.Z,{elements:{pale:r.createElement("span",{className:"highlighted-pale"})},parameters:{tk_amount:e.tokensSum,currency_amount:n},messageId:`oneClickRecharge.addTokens.${l}.button`})),!i&&r.createElement("div",{className:"one-click-recharge-alternative-action",onClick:this.buyTokensClickHandler},s("oneClickRecharge.addTokens.common.buyAnotherAmount"))),r.createElement(tm.ZP,{className:"one-click-recharge-close-btn",onClick:this.smoothHidingWithPhaseCheck},r.createElement(e7.Z,{img:"close-3"}))))}renderOneClickProcessing(){let{trans:e}=this.props.i18n;return r.createElement(r.Fragment,null,r.createElement("div",{className:"one-click-recharge-layer-left"},r.createElement(eC.Z,{className:"one-click-recharge-loader",loaderType:"sector-circle",size:30,isInline:!0}),r.createElement("div",{className:"one-click-recharge-title"},e("oneClickRecharge.processing.title"))),r.createElement("div",{className:"one-click-recharge-layer-right"},r.createElement(tm.ZP,{className:"one-click-recharge-close-btn",onClick:this.smoothHidingWithPhaseCheck},r.createElement(e7.Z,{img:"close-3"}))))}renderOneClickDeclined(){let{isMobile:e,i18n:{trans:t}}=this.props;return r.createElement(r.Fragment,null,r.createElement("div",{className:"one-click-recharge-layer-left"},r.createElement(e7.Z,{className:"one-click-recharge-icon",img:"tokens-error"}),r.createElement("div",{className:"one-click-recharge-title"},t("oneClickRecharge.declined.common.title"))),r.createElement("div",{className:"one-click-recharge-layer-right"},r.createElement(tm.ZP,{onClick:this.buyTokensClickHandler},t(`oneClickRecharge.declined.${e?"mobile":"desktop"}.button`)),r.createElement(tm.ZP,{className:"one-click-recharge-close-btn",onClick:this.smoothHidingWithPhaseCheck},r.createElement(e7.Z,{img:"close-3"}))))}renderOneClickSuccess(){let{lastRefillTokensSum:e}=this.props;return r.createElement(r.Fragment,null,r.createElement("div",{className:"one-click-recharge-layer-left"},r.createElement(e7.Z,{className:"one-click-recharge-icon",img:"tokens-check"}),r.createElement("div",{className:"one-click-recharge-title"},r.createElement(tn.Z,{elements:{highlighted:r.createElement("span",{className:"highlighted-green"}),br:r.createElement("br",null)},parameters:{tokens:e},messageId:"oneClickRecharge.success.title"}))),r.createElement("div",{className:"one-click-recharge-layer-right"},r.createElement(tm.ZP,{className:"one-click-recharge-close-btn",onClick:this.smoothHidingWithPhaseCheck},r.createElement(e7.Z,{img:"close-3"}))))}renderOneClickBuy(){let{timeLeft:e}=this.state,{isMobile:t,isLightTheme:i,i18n:{trans:a}}=this.props,s=t?"mobile":"desktop";return r.createElement(r.Fragment,null,r.createElement("div",{className:"one-click-recharge-layer-left"},r.createElement(e7.Z,{className:"one-click-recharge-icon",img:i?"tokens-plus-red":"tokens-plus-orange"}),r.createElement("div",null,r.createElement("div",{className:"one-click-recharge-title"},r.createElement(tn.Z,{elements:{highlighted:r.createElement("span",{className:"highlighted-brand"})},parameters:{time:null!=e?e:""},messageId:`oneClickRecharge.buyTokens.${s}.title`})),r.createElement("div",{className:"one-click-recharge-description"},a(`oneClickRecharge.buyTokens.${s}.description`)))),r.createElement("div",{className:"one-click-recharge-layer-right"},r.createElement(tm.ZP,{style:"apply-alter2",onClick:this.buyTokensClickHandler},a(`oneClickRecharge.buyTokens.${s}.button`)),r.createElement(tm.ZP,{className:"one-click-recharge-close-btn",onClick:this.smoothHidingWithPhaseCheck},r.createElement(e7.Z,{img:"close-3"}))))}renderClickPhase(){switch(this.state.phase){case iy.BUY:return this.renderOneClickBuy();case iy.ADD:{let{refillPackage:e}=this.props;if(e)return this.renderOneClickAdd(e);return this.renderOneClickBuy()}case iy.DECLINED:return this.renderOneClickDeclined();case iy.SUCCESS:return this.renderOneClickSuccess();case iy.PROCESSING:return this.renderOneClickProcessing();default:return null}}render(){let{isDisappearing:e,isHiddenByUser:t,phase:i}=this.state,{isAvailable:a,isVisible:s}=this.props,l=iN(this.state);return!a&&l||!s&&l||t||!i?null:r.createElement(iS.CSSTransition,{classNames:"one-click-recharge-wrapper",in:!e,enter:!1,timeout:1e3,onExited:()=>{this.setState({isDisappearing:!1})}},r.createElement("div",{className:(0,L.AK)("one-click-recharge-wrapper",{"one-click-recharge-wrapper-processing":i===iy.PROCESSING})},this.renderClickPhase()))}constructor(e){super(e),(0,s._)(this,"timeoutId",void 0),(0,s._)(this,"propsUpdateToActionsMap",[{update:["isRefillAvailable"],action:()=>{let{isRefillAvailable:e}=this.props;this.setState(t=>{let{phase:i}=t;return!i||iN(t)?{...t,phase:iy[e?"ADD":"BUY"]}:t})}},{update:["hasPurchaseFailed","purchaseSucceededToken"],action:()=>{let{hasPurchaseFailed:e}=this.props;this.state.phase===iy.PROCESSING&&(this.setState({phase:iy[e?"DECLINED":"SUCCESS"]}),this.props.resetPurchase(),setTimeout(this.smoothHidingWithoutPhaseCheck,1e4))}},{update:["isVisible","isAvailable"],action:()=>this.updatePanelState(this.props)}]),(0,s._)(this,"updateCountDown",()=>{this.setState(e=>{var t;let i=(null!==(t=e.timeLeft)&&void 0!==t?t:"")>"00:00"?this.props.i18n.getTimeSubtractSeconds(e.timeLeft,1):e.timeLeft;return{...e,timeLeft:i}},()=>{clearTimeout(this.timeoutId),this.timeoutId=setTimeout(this.updateCountDown,1e3)})}),(0,s._)(this,"smoothHidingBase",e=>{this.setState({isDisappearing:!0});let t=iN(this.state)&&e;setTimeout(()=>{t&&this.setState({isHiddenByUser:!0}),this.hide()},1e3)}),(0,s._)(this,"smoothHidingWithoutPhaseCheck",()=>{this.smoothHidingBase(!1)}),(0,s._)(this,"smoothHidingWithPhaseCheck",()=>{this.smoothHidingBase(!0)}),(0,s._)(this,"show",e=>{this.props.emitUiEvent(M.Q7.ONE_CLICK_RECHARGE_PANEL_TOGGLED,{value:!0}),this.setState({timeLeft:e},()=>{this.updateCountDown()})}),(0,s._)(this,"hide",()=>{let{isRefillAvailable:e}=this.props;this.props.emitUiEvent(M.Q7.ONE_CLICK_RECHARGE_PANEL_TOGGLED,{value:!1}),this.setState({phase:iy[e?"ADD":"BUY"]})}),(0,s._)(this,"buyTokensClickHandler",()=>{this.props.showPurchaseModal({triggerSource:tM.t.RefillBuyOtherAmount})}),(0,s._)(this,"addTokensClickHandler",()=>{let{model:e}=this.props;this.props.emitButtonEvent(M.FO.PRIVATE_RECHARGE_ONE_CLICK,{modelId:e.id,refillPackage:this.props.refillPackage,source:tM.t.TipFromPrivate,tipAmount:void 0,makeRefill:!0,purchaseFrom:I.Lk.REFILL_PRIVATE_SHOW_PROLONG}),this.setState({phase:iy.PROCESSING})}),this.state={isDisappearing:!1,isHiddenByUser:!1,phase:null,timeLeft:null}}}let ik=(0,e9.GV)(i_),iA={emitButtonEvent:P.d2,emitUiEvent:P.gz,resetPurchase:iT.hd,showPurchaseModal:y.U1},iI=(0,_.H)("isLayoutUpToM")((0,l.$j)((e,t)=>{var i;let{auth:{currentUser:a,isLoggedIn:s,isLoggingOut:r},viewCam:{isOwnShow:l,isOneClickRechargePanelVisible:n,isRefillAvailable:o,show:c},tokens:{hasPurchaseFailed:d}}=e,{model:u,isLayoutUpToM:m}=t,p=null==u?void 0:u.status,v=null==c?void 0:c.mode,E=(0,tO.xV)(e),g=(0,h.R3)(e),S=null!==(i=null==E?void 0:E.tokens)&&void 0!==i?i:0,C=(0,iC.Zf)(e),b=(0,ib.UD)(e),f=s&&!r&&!(null==a?void 0:a.isStudio)&&!(null==a?void 0:a.isModel)&&!(null==a?void 0:a.isAdmin)&&!(null==a?void 0:a.isSupport),T=iw({model:u,isOwnShow:l,groupShowMode:(0,h.U8)(e)}),y=3*T<=S,w="endSpy"===g&&(0,h.V$)(e);return{refillPackage:C,currentUser:a,hasPurchaseFailed:d,isAvailable:f&&v===p&&!y&&!w&&["sendPrivateTip","endSpy","quitGroupShowOrTip"].includes(g),isMobile:m,purchaseSucceededToken:(0,ib.BN)(e),isRefillAvailable:o,lastRefillTokensSum:b,isVisible:n&&!w,isLightTheme:(0,K.LK)(e),timeLeft:iP(S,T)}},iA)(ik));class iM extends(a=r.Component){renderControls(){let{model:e,discounts:t,controlsState:i,viewCamFanClubTier:a,canOpenPrivateMessages:s,isLayoutMoreThanL:l,isSendTipFromSpyModeEnabled:n,fanClubPrivateDiscounts:o}=this.props;if(!e)return r.createElement("span",null,"\xa0");switch(i){case"waitingForModelAnswer":return r.createElement("div",{className:"proposal-controls-block"},r.createElement("span",{className:"proposal"},r.createElement(eC.Z,{size:24}),this.props.i18n.trans("viewCam.waitingForModelAnswer")),r.createElement("div",{className:"proposal-cancel",onClick:this.cancelProposalClickHandler},r.createElement(e7.Z,{img:"close-5"})));case"startPrivateOrSendTip":{let i=e.doPrivate||e.doP2p,{actual:s,discounted:l,type:n}=(0,T.oB)(e,t,o);return r.createElement(r.Fragment,null,i&&r.createElement("span",{className:"view-cam-controls__btn-wrapper"},r.createElement(tm.ZP,{size:"large",style:"gold-outline-ds",onClick:this.startPrivateClickHandler,className:(0,L.AK)("view-cam-controls-btn view-cam-controls__private-btn",{"view-cam-controls__private-btn--with-discount":!!n})},r.createElement(tV.t,{textId:"button.privateShow",shortTextId:"button.startPrivateShort"}),this.renderPrivatePrice(s,l)),n&&r.createElement(tN.V,{tier:a,type:n})),r.createElement("span",{className:"view-cam-controls__btn-wrapper"},this.renderSendTipButton()))}case"joinGroupShowOrSendTip":return r.createElement(r.Fragment,null,r.createElement(tE,{className:"view-cam-controls-btn"}),this.renderSendTipButton());case"quitGroupShowOrTip":return r.createElement(r.Fragment,null,r.createElement(tm.ZP,{size:"large",style:"default-outline",className:"view-cam-controls-btn",onClick:this.handleQuitShowButtonClick},this.props.i18n.trans("button.quit")),this.renderSendTipButton());case"sendPrivateTip":return r.createElement(r.Fragment,null,this.renderSendTipButton({onClick:this.sendPrivateTipClickHandler,isPrivate:!0}));case"endSpy":return r.createElement(r.Fragment,null,r.createElement(ty.ZP,{size:"large",style:"end-broadcasting",onClick:this.stopSpyClickHandler,className:"view-cam-controls-btn view-cam-controls__stop-spy"},r.createElement(tV.t,{shortTextId:"button.endSpyShort",textId:"button.endSpy"})),n&&r.createElement(tD,{onClick:()=>{this.props.startTokenTransaction("SendTipButton"),s&&l?(this.props.modelChatSelectTab(C.MODEL_CHAT_TABS.PRIVATE),this.props.setIsPrivateActionListVisible(!0)):this.props.emitButtonEvent(M.FO.VIEWCAM_SEND_PRIVATE_TIP,{source:C.buX.TIP_MENU,shouldScrollToChat:!0,isInBackground:!0,modelId:e.id,additionalParam:{amplitudeEventProps:{prodSubtype:C.buX.TIP_MENU,prodType:C.Hrc.TIP}}})}}));case"sendOfflineTip":{let t=(t,i)=>r.createElement(tL.Z,{className:`${t} view-cam-controls-btn view-cam-controls__pm-btn`,triggerSource:M.FO.VIEWCAM_PRIVATE_MESSAGE,shouldRenderIcon:!i,customContent:i,shouldOpen:"privateTab",user:e});return r.createElement(r.Fragment,null,t("btn-default-outline media-up-to-xs-hidden"),t("media-after-s-hidden send-pm-mobile",r.createElement(e7.Z,{img:"envelope-bubble"})),r.createElement(tD,{onClick:this.sendOfflineTipClickHandler}))}case"sendOfflinePrivateTip":return r.createElement(tD,{onClick:this.sendOfflineTipClickHandler});default:return r.createElement("span",null,"\xa0")}}renderGroupShowMobileDropdown(){let{isLayoutUpToS:e,controlsState:t,isXhlOrMirror:i}=this.props;return e&&"joinGroupShowOrSendTip"===t?r.createElement(tp.Z,{className:(0,L.AK)("group-show-dropdown-mobile",{"group-show-dropdown-xhl":i}),stateValueGetter:x.X7,position:"bottom",initiatorRef:{current:null}},r.createElement(to,null)):null}renderFavoriteToggle({showAnnounced:e,isSpying:t}){let{isCurrentUserModelOrStudio:i,isInCam2Cam:a,isInPrivateMode:s,isLoggedIn:l,model:n}=this.props;return!n||a||s&&!t?null:r.createElement(ig,{showAnnounced:e,canAddToFavorite:!l||!i})}renderUpgradePrivate(){let{isInCam2Cam:e,isInPrivateMode:t,isInSpyMode:i,isCam2camEnabled:a}=this.props;return e||i||!t||!a?null:r.createElement(tw.Y,{className:"control view-cam-controls-btn view-cam-controls__upgrade-private"})}renderStopPrivate(){let{isInCam2Cam:e,isInPrivateMode:t,isInSpyMode:i}=this.props;return i?null:e||t?r.createElement(tm.ZP,{className:"control view-cam-controls-btn view-cam-controls__end-cam2cam",onClick:e?this.stopCam2CamClickHandler:this.stopPrivateClickHandler,style:"end-broadcasting"},r.createElement("div",{className:"player-toolbox-icon-item view-cam-controls-btn__stop-spy"},r.createElement(e7.Z,{img:"stop",size:14})),r.createElement(tV.t,{className:"view-cam-controls-btn__stop-spy-text",shortTextId:"button.endShort",textId:"button.endPrivate"})):null}renderToolboxControl(){let{isInCam2Cam:e}=this.props;return e?r.createElement(tZ.Z,null):null}render(){let{controlsState:e,isCamAvailable:t,isCurrentUserModelOrStudio:i,isInSpyMode:a,isMyStudioModel:s,model:l,isModelInGroupShow:n,isCurrentUserInGroupShow:o,isInPrivateMode:c,isInCam2Cam:d,isInFavorites:u,favoritedCount:m,isPrivateToSpyModeTransitionEnabled:p}=this.props,h=s&&(!t||a)&&l.status===C.MODEL_STATUSES.STATUS_PRIVATE,v=!i||h,E="joinGroupShowOrSendTip"===e,g="endSpy"===e;return r.createElement(t5,{isInFavoritesFromServer:u,favoritedCountFromServer:m,favoritesClickHandler:this.favoritesClickHandler},r.createElement("div",{className:(0,L.AK)("view-cam-controls","with-new-send-tip",{"media-up-to-s-hidden":n&&!o})},r.createElement("div",{className:(0,L.AK)("view-cam-controls-wrapper",{"view-cam-controls-wrapper--private":c,"view-cam-controls-wrapper--cam2cam":d,"view-cam-controls-wrapper--show":E,"view-cam-controls-wrapper--controls-start-spy":"startSpy"===e})},this.renderFavoriteToggle({showAnnounced:E,isSpying:g}),v&&r.createElement(r.Fragment,null,r.createElement("div",{className:"view-cam-controls-wrapper__left"},this.renderStopPrivate()),r.createElement("div",{className:"view-cam-controls-wrapper__center"},this.renderUpgradePrivate(),this.renderToolboxControl()),r.createElement("div",{className:"view-cam-controls-wrapper__right"},r.createElement("div",{className:(0,L.AK)("view-cam-buttons-wrapper",{"view-cam-buttons-wrapper--private-or-cam2cam":c||d||g&&p,"view-cam-buttons-wrapper--offline":"sendOfflineTip"===e})},this.renderControls()),l&&r.createElement(iI,{model:l})))),v&&this.renderGroupShowMobileDropdown()),v&&r.createElement(t7,null))}constructor(e){super(e),(0,s._)(this,"showConfirmationModalCounter",void 0),(0,s._)(this,"favoritesClickHandler",e=>{null==e||e.preventDefault(),null==e||e.stopPropagation();let{model:t,isInFavorites:i}=this.props;i||this.props.enableUserFeedIfModelHasPosts(t.id),this.props.toggleFavorite(t)}),(0,s._)(this,"startPrivateClickHandler",()=>{let{model:e,startTokenTransaction:t}=this.props;t("PrivateShowButton"),this.props.emitButtonEvent(M.FO.VIEWCAM_START_PRIVATE,{modelId:e.id})}),(0,s._)(this,"stopPrivateClickHandler",()=>{let{model:e}=this.props;B.Z.send(tS.L.STOP_PRIVATE),this.props.emitButtonEvent(M.FO.VIEWCAM_STOP_PRIVATE,{modelId:e.id})}),(0,s._)(this,"stopCam2CamClickHandler",()=>{let{model:e}=this.props;B.Z.send(tS.L.STOP_CAM_2_CAM),this.props.emitButtonEvent(M.FO.VIEWCAM_STOP_P2P,{modelId:e.id})}),(0,s._)(this,"stopSpyClickHandler",()=>{let{model:e}=this.props;B.Z.send(tS.L.STOP_SPY),this.props.emitButtonEvent(M.FO.VIEWCAM_STOP_SPY,{modelId:e.id})}),(0,s._)(this,"cancelProposalClickHandler",()=>{this.props.cancelProposal("buttonClickHandler")}),(0,s._)(this,"sendTipNewClickHandler",()=>{let{model:e,isInPrivateMode:t,isInCam2Cam:i,isActionMenuVisible:a}=this.props;if(!a){let a=t||i?M.FO.VIEWCAM_SEND_PRIVATE_TIP:M.FO.VIEWCAM_SEND_ONLINE_TIP;this.props.emitButtonEvent(a,{modelId:null==e?void 0:e.id,shouldAvoidTipModal:!0})}this.props.emitButtonEvent(M.FO.TIP_MENU_OPEN),this.props.toggleActionMenu(void 0,void 0,{user:e})}),(0,s._)(this,"sendPrivateTipClickHandler",()=>{let{model:e}=this.props;this.props.toggleActionMenu(C.pow.PRIVATE_MENU,void 0,{user:e,isPrivateTip:!0})}),(0,s._)(this,"sendOfflineTipClickHandler",()=>{let{model:e,startTokenTransaction:t}=this.props;t("SendTipButton"),this.props.emitButtonEvent(M.FO.VIEWCAM_SEND_OFFLINE_TIP,{modelId:e.id,shouldScrollToChat:!0,source:C.buX.TIP_MENU,additionalParam:{buyTokensSource:tM.t.ViewCamOffline,isPrivateTip:!0}})}),(0,s._)(this,"renderSendTipButton",e=>r.createElement(tC.L,{isActive:this.props.isActionMenuVisible,isActionMenuAvailable:this.props.hasActionMenuItems,className:"send-tip-btn",...e,onClick:t=>{this.props.startTokenTransaction("SendTipButton"),(null==e?void 0:e.onClick)?e.onClick(t):this.sendTipNewClickHandler()}})),(0,s._)(this,"renderPrivatePrice",(e,t)=>r.createElement("span",{className:"view-cam-controls__private-btn-price"},e&&r.createElement(tP.Z,{className:"view-cam-controls__private-btn-actual-price"},e),"\xa0",r.createElement("span",{className:"btn-gold-outline-ds__accent-text"},this.props.i18n.trans("tokensShort",{amount:t})))),(0,s._)(this,"handleQuitShowButtonClick",()=>{if(this.props.isPerMinuteShow)this.props.quitGroupShow({type:"groupShow"});else{var e,t;null!==(t=(e=this.showConfirmationModalCounter).current)&&void 0!==t||(e.current=0),this.showConfirmationModalCounter.current++,t_.P4.show(tg.r,{exitTicketShowConfirmationModalShownCount:this.showConfirmationModalCounter.current,onLeave:this.props.quitGroupShow})}}),this.showConfirmationModalCounter=(0,r.createRef)()}}(0,s._)(iM,"defaultProps",{model:null});let iR=(0,e9.GV)(iM),iL={cancelProposal:e$.sA,emitButtonEvent:P.d2,quitGroupShow:e$.Mx,startWizard:tR.R7,toggleFavorite:ts.ZN,enableUserFeedIfModelHasPosts:tk.at,toggleActionMenu:ti.Wp,modelChatSelectTab:tr.aK,setIsPrivateActionListVisible:ta.Jg,setSendTipData:p.pD,updateLandingParam:tT.Wv,showModal:y.K4,startTokenTransaction:tI.B.actions.start},iO=(0,_.H)("isLayoutUpToS","isLayoutMoreThanL","isLayoutMoreThanM")((0,l.$j)((e,t)=>{let{model:i}=t,a=(0,tO.pC)(e),s=!!i&&(0,tU.pF)(e,i.id);return{controlsState:(0,h.R3)(e),currentUser:(0,eW.ts)(e),favoritedCount:(0,h.D)(e),isCurrentUserModelOrStudio:(0,te.ly)(e),isInFavorites:!!i&&(0,tf.D9)(e,i.id),isInSpyMode:(0,h.Hn)(e),isInPrivateMode:(0,h.wp)(e),isModelInGroupShow:(0,h.Vf)(e),isCurrentUserInGroupShow:(0,h._A)(e),isInCam2Cam:(0,h.UP)(e),isPerMinuteShow:!(0,h.Tn)(e),isXhlOrMirror:(0,K.cv)(e),isLoggedIn:(0,eW.Cg)(e),isMyStudioModel:(0,f.EP)(e),isActionMenuVisible:(0,tb.AI)(e),hasActionMenuItems:(0,b.KN)(e),isCam2camEnabled:(0,h.RR)(e),canOpenPrivateMessages:a||s,isSendTipFromSpyModeEnabled:(0,c.MLn)(e),discounts:(0,tA.Pn)(e),isCurrentUserUltimate:(0,te.Kr)(e),landingParams:(0,c.TK9)(e),isPrivateToSpyModeTransitionEnabled:(0,c.zP$)(e),fanClubPrivateDiscounts:(0,h.ti)(e),viewCamFanClubTier:(0,h.oh)(e)}},iL)(iR));var iU=i(29754),iZ=i(76485),iB=i(7474),iV=i(19171);let iD=({kingInfo:e,becomeKingThreshold:t})=>{let i=(0,n.T)(),a=(0,o.C)(h.PD),s=(0,o.C)(tO.Ms),{start:l}=(0,iZ.V)();return s&&s===e.kingUsername||(null==a?void 0:a.status)!==C.MODEL_STATUSES.STATUS_PUBLIC?null:r.createElement(tm.ZP,{style:"call2action-premium",size:"small",onClick:()=>{l("BecomeKingTooltipButton");let s=e.kingAmount||t;if(s){let t=s-(e.selfAmount||0)+1;i((0,P.FZ)(t))}i((0,P.d2)(M.FO.VIEWCAM_SEND_ONLINE_TIP,{modelId:null==a?void 0:a.id,additionalParam:{source:C.buX.TIP_MENU,amplitudeEventProps:{prodType:C.Hrc.TIP,prodSubtype:C.hZ6.KING}}}))}},r.createElement(tn.Z,{messageId:"viewCam.info.tooltip.becomeKing",elements:{icon:r.createElement(e7.Z,{className:"king-icon",img:"king"})}}))},iF=e=>{let{trans:t}=(0,e9.QT)(),{fanClubTier:i,kingInfo:a,kingUser:s,kingSettings:l}=e,n=Number(null==l?void 0:l.becomeKingThreshold)||0;return r.createElement("div",{className:"view-cam-info-king"},r.createElement("div",{className:"view-cam-info-king-content",id:"view_cam_info_king"},t("viewCam.info.king"),s?r.createElement("div",{className:"king-wrapper is-king"},r.createElement(e7.Z,{img:"king"}),r.createElement(iB.Z,{user:s,isIconVisible:!1,fanClubTier:i,isVisibleTierTooltip:!1,isLevelLeagueStatusVisible:!1,isUltimateIconTooltipVisible:!1})):n>0?r.createElement(tn.Z,{className:"become-king-info",messageId:"viewCam.info.kingThreshold",parameters:{amount:n},elements:{accent:r.createElement("span",{className:"king-threshold"})}}):r.createElement("div",{className:"king-wrapper"},r.createElement(e7.Z,{img:"king"}),r.createElement("span",{className:"be-first"},t("viewCam.info.toBeKing"))),a?r.createElement(ii.Z,{targetId:"view_cam_info_king",placement:"left",isMobileRelative:!1,maxWidth:350,showDelay:250},s&&r.createElement(tn.Z,{className:"king-wrapper-tooltip-title",messageId:"viewCam.info.tooltip.title",elements:{username:r.createElement(iB.Z,{user:s,isIconVisible:!1,isLevelLeagueStatusVisible:!1,placeId:"kink-tooltip"}),tokens:r.createElement("span",{className:"king-wrapper-tooltip-tokens"},a.kingAmount)}}),s||n?r.createElement(tn.Z,{className:"king-wrapper-tooltip-description",messageId:"viewCam.info.tooltip.description",elements:{tokens:r.createElement("span",{className:"king-wrapper-tooltip-tokens"},a.selfAmount)}}):r.createElement("span",{className:"king-wrapper-tooltip-description"},t("viewCam.info.tooltip.hint")),r.createElement(iD,{kingInfo:a,becomeKingThreshold:n}),r.createElement(iV.Z,null)):null))};var iW=i(6848);let i$=e=>{let t=(0,eh.T2)(e),i=(0,h.qF)(e);if(!t||!i)return null;let a=(0,iW.dN)(e,t.username);return(null==a?void 0:a[i.id])||null},ix=(0,l.$j)(e=>({isTheatreModeActive:(0,H.z)(e),goalData:(0,h.IY)(e),isPromoModel:(0,h.P1)(e),kingUser:(0,h.qF)(e),kingInfo:(0,eh.Kd)(e),kingFanClubTier:i$(e),kingSettings:(0,h.LF)(e)}))(({goalData:e,isPromoModel:t,kingFanClubTier:i,kingUser:a,kingInfo:s,kingSettings:l,isVisible:n,isTheatreModeActive:o})=>o?null:r.createElement("div",{className:(0,L.AK)("view-cam-info view-cam-info--with-new-goal",{"view-cam-info--visible":n})},r.createElement(iU.Z,{goal:e}),!t&&r.createElement(iF,{kingSettings:l,kingInfo:s,kingUser:a,fanClubTier:i}))),iH=({modelStatus:e,isNonNudeWL:t,posterImageUrl:i,children:a,modelName:s,shouldBeBlurred:l,isBackgroundVideo:n,isBlurVideoOnPrivate:o})=>{let c=[C.MODEL_STATUSES.STATUS_PRIVATE,C.MODEL_STATUSES.STATUS_VIRTUAL_PRIVATE,C.MODEL_STATUSES.STATUS_P2P],d=e&&c.includes(e),u=[C.MODEL_STATUSES.STATUS_IDLE,C.MODEL_STATUSES.STATUS_OFF,C.MODEL_STATUSES.STATUS_PRIVATE,C.MODEL_STATUSES.STATUS_VIRTUAL_PRIVATE,C.MODEL_STATUSES.STATUS_P2P,C.MODEL_STATUSES.STATUS_P2P_VOICE,C.MODEL_STATUSES.STATUS_GROUP_SHOW],m=e&&u.includes(e),p=t&&!i;return r.createElement("div",{className:(0,L.AK)("poster",ep.j.player,{"big-height":m,"above-background-video":n||o})},!o&&r.createElement("div",{className:(0,L.AK)("backdrop",{"prevent-dark":d,blur:l,"non-nude-cover":p})},i&&!n&&r.createElement(eb.s,{username:s,area:"offline",src:i})),a)};var iK=i(7581),iG=i(59010),ij=i(36561),iz=i(65656),iq=i(78983),iY=i(8031),iQ=i(87766),iJ=i(41552),iX=i(68020),i0=i(97686),i1=i(11116),i2=i(5144),i6=i(79137);let i8="viewCamUnobtrusiveProposal",i3="watchingLimit",i7="camMembers",i9="publicRecordingRenewInterval",i4="enjoyWatchHistory",i5=(e,t)=>e.viewCamNotification===i1.h3.SUBSCRIBE&&!t.viewCamNotification,ae=(e,t)=>e.currentModalName===M.Ny.AUTH&&!t.currentModalName,at={addToWatchHistory:ij.IH,closeNotification:e$.vU,createFreeAccountModal:e$.cS,hideModal:y.VG,loadMembers:iz.el,showModal:y.K4,resetModelWatchingLimit:e$.JY,updateModelWatchingLimit:e$.Hn,showNotification:e$.c0,discountsReset:i0.B7,renewPublicRecording:e$.oN};class ai extends r.Component{componentDidMount(){this._isMounted=!0,(0,U.Z)(this.propsUpdateToActionsMap,{},this.props)}componentDidUpdate(e){(0,U.Z)(this.propsUpdateToActionsMap,e,this.props)}componentWillUnmount(){this._isMounted=!1,this.stopAllSchedulers()}isViewCamNotificationAllowed(){return M.BROWSER_CAPABILITIES.desktop||M.BROWSER_CAPABILITIES.isTablet}getMinuteOfDay(){let e=(0,iq.YF)(new Date,iq.Ju.day);return 0|(0,iq.og)(new Date,e,iq.$v.minutes)}render(){return null}constructor(e){super(e),(0,s._)(this,"discountsTimeoutId",void 0),(0,s._)(this,"_isMounted",!1),(0,s._)(this,"isSubscriptionPopupClosedByModelChange",!1),(0,s._)(this,"hasShownCreateFreeAccountModal",!1),(0,s._)(this,"hasShownSubscriptionPopup",!1),(0,s._)(this,"propsUpdateToActionsMap",[{update:h.jh,action:()=>{this.hasShownCreateFreeAccountModal=!1,this.hasShownSubscriptionPopup=!1,this.isSubscriptionPopupClosedByModelChange=!0,this.closeSubscriptionPopup(),this.startScheduler(this.props)}},{update:(...e)=>i5(...e),action:()=>{this.isSubscriptionPopupClosedByModelChange?this.isSubscriptionPopupClosedByModelChange=!1:this.hasShownSubscriptionPopup=!0,this.startScheduler(this.props)}},{update:(e,t)=>!e.isCamAvailable&&t.isCamAvailable,action:()=>{this.hasShownSubscriptionPopup||this.startScheduler(this.props)}},{update:["isSubscribed"],action:()=>{let{isSubscribed:e}=this.props;e&&(this.closeSubscriptionPopup(),this.hasShownSubscriptionPopup=!0)}},{update:ae,action:()=>{this.hasShownSubscriptionPopup||this.startScheduler(this.props)}},{update:$.gk,action:()=>this.startScheduler(this.props)},{update:i6.tH,action:()=>this.closeSubscriptionPopup()},{update:["isLoggedIn"],action:()=>{let{isLoggedIn:e}=this.props;e?(this.resetAllWatchingLimits(),this.stopWatchingScheduler()):this.startWatchingScheduler()}},{update:["model.id","model.status"],action:()=>{let{model:e}=this.props;(null==e?void 0:e.id)&&e.status!==C.MODEL_STATUSES.STATUS_OFF?(this.startCamMembersScheduler(),this.startGuestWatchHistoryTimeout()):(this.stopCamMembersScheduler(),this.clearGuestWatchHistoryTimeout())}},{update:["model.id","discounts"],action:()=>{this.discountsTimeoutId&&clearTimeout(this.discountsTimeoutId);let{discounts:e}=this.props;if(!(null==e?void 0:e.activatedTill))return;let t=new Date,i=new Date(null==e?void 0:e.activatedTill).getTime()-t.getTime();if(i<0){this.props.discountsReset();return}this.discountsTimeoutId=setTimeout(()=>this.props.discountsReset(),i)}},{update:["isPublicRecordingStarted","publicRecordingRenewInterval"],action:()=>{this.props.isPublicRecordingStarted?this.startPublicRecordingRenewScheduler():this.stopPublicRecordingRenewScheduler()}}]),(0,s._)(this,"stopAllSchedulers",()=>{this.stopScheduler(),this.stopWatchingScheduler(),this.stopCamMembersScheduler(),this.clearGuestWatchHistoryTimeout(),this.stopPublicRecordingRenewScheduler(),this.discountsTimeoutId&&clearTimeout(this.discountsTimeoutId)}),(0,s._)(this,"clearGuestWatchHistoryTimeout",()=>{iQ.Z.stopTimeout(i4)}),(0,s._)(this,"startGuestWatchHistoryTimeout",()=>{let{addToWatchHistory:e,model:t,currentUserId:i,watchHistoryTimeoutFromConfig:a}=this.props;this.clearGuestWatchHistoryTimeout();let s=!!i;iQ.Z.startTimeout(i4,"number"==typeof a?1e3*a:15e4,()=>e(t.id,{shouldSendSaveRequest:s,userId:i}))}),(0,s._)(this,"stopScheduler",()=>{iQ.Z.stopTimeout(i8)}),(0,s._)(this,"startScheduler",e=>{let{isDocumentVisible:t}=e,i=!this.hasShownSubscriptionPopup||!this.hasShownCreateFreeAccountModal;this.stopScheduler(),t&&i&&iQ.Z.startTimeout(i8,15e4,this.showPopup)}),(0,s._)(this,"showPopup",()=>{if(!this._isMounted)return;let{hasModal:e,isCamAvailable:t,isLoggedIn:i,isPushApiAvailable:a,isSubscribed:s}=this.props;if(!i&&!e){if(a&&t&&!this.hasShownSubscriptionPopup&&!s){this.showSubscriptionPopup();return}this.hasShownCreateFreeAccountModal||(this.hasShownCreateFreeAccountModal=!0,this.props.createFreeAccountModal(I.Dt.VIEW_CAM_WATCH_MODEL))}}),(0,s._)(this,"showSubscriptionPopup",()=>{let{model:e}=this.props;this.isSubscriptionPopupClosedByModelChange=!1,this.isViewCamNotificationAllowed()?this.props.showNotification(i1.h3.SUBSCRIBE):t_.P4.show(i2.O,{model:e})}),(0,s._)(this,"closeSubscriptionPopup",()=>{this.isViewCamNotificationAllowed()&&this.props.closeNotification()}),(0,s._)(this,"stopWatchingScheduler",()=>{let{isWatchingIntervalStart:e}=this.state;e&&(iQ.Z.stopInterval(i3),this.setState({isWatchingIntervalStart:!1}))}),(0,s._)(this,"startWatchingScheduler",()=>{let{isWatchingIntervalStart:e}=this.state;e||(iQ.Z.startInterval(i3,3e4,this.updateTimeLeft),this.setState({isWatchingIntervalStart:!0}))}),(0,s._)(this,"stopCamMembersScheduler",()=>{iQ.Z.stopInterval(i7)}),(0,s._)(this,"startCamMembersScheduler",()=>{let{viewersListEnabled:e,viewersListUpdateInterval:t}=this.props;this.stopCamMembersScheduler(),e&&t&&iQ.Z.startInterval(i7,1e3*t,this.updateCamMembers)}),(0,s._)(this,"stopPublicRecordingRenewScheduler",()=>{iQ.Z.stopInterval(i9)}),(0,s._)(this,"startPublicRecordingRenewScheduler",()=>{let{publicRecordingRenewInterval:e}=this.props;this.stopPublicRecordingRenewScheduler(),e&&(this.props.renewPublicRecording(),iQ.Z.startInterval(i9,e*iY.Zv,this.props.renewPublicRecording))}),(0,s._)(this,"hasLimitationExpires",()=>{let{modelWatchingLimit:e}=this.props,{timeStart:t}=e;return t&&new Date(t).getTime()+C.UbK<Date.now()}),(0,s._)(this,"resetWatchingLimit",()=>{let{model:e}=this.props;this.props.resetModelWatchingLimit(e.id)}),(0,s._)(this,"resetAllWatchingLimits",()=>{this.props.resetModelWatchingLimit()}),(0,s._)(this,"updateTimeLeft",()=>{let{isCamAvailable:e,model:t,modelWatchingLimit:i}=this.props,{timeStart:a=Date.now(),minutes:s=[]}=i,r=this.getMinuteOfDay();if(this.hasLimitationExpires())this.resetWatchingLimit();else if(e){let e={timeStart:a,minutes:(0,iK.Z)((0,iG.Z)(s,r))};this.props.updateModelWatchingLimit(t.id,e)}}),(0,s._)(this,"updateCamMembers",()=>{this.props.loadMembers({isDefaultErrorHandlerEnabled:!1})}),this.state={isWatchingIntervalStart:!1}}}let aa=(0,l.$j)((e,{model:t})=>{let{auth:{isLoggedIn:i},ui:{currentModalName:a,hasModal:s,isDocumentVisible:r},viewCam:{isCamAvailable:l,notification:n}}=e;return{currentModalName:a,hasModal:s,isCamAvailable:l,isDocumentVisible:r,isLoggedIn:i,isPushApiAvailable:(0,iJ.iV)(),isSubscribed:(0,t$.LW)(e,null==t?void 0:t.id),viewCamNotification:n,modelWatchingLimit:(0,h.OB)(e),viewersListEnabled:(0,iX.cL)(e),viewersListUpdateInterval:(0,iX.Bi)(e),discounts:(0,tA.Pn)(e),currentUserId:(0,eW.rc)(e),watchHistoryTimeoutFromConfig:(0,iX.Jc)(e),isPublicRecordingStarted:(0,h.qJ)(e),publicRecordingRenewInterval:(0,c.NRb)(e)}},at)(ai);var as=i(98233),ar=i(88051);let al=({image:e,content:t,controls:i,closeClickHandler:a})=>r.createElement("div",{className:"view-cam-notification"},e&&r.createElement("div",{className:"view-cam-notification-image"},e),r.createElement("div",{className:"view-cam-notification-content"},t),i&&r.createElement("div",{className:"view-cam-notification-controls"},i),r.createElement("div",{className:"view-cam-notification-closer",onClick:a},r.createElement("div",{className:"view-cam-notification-closer-icon-wrapper"},r.createElement(e7.Z,{img:"close-5"})))),an={closeNotification:e$.vU},ao={[i1.h3.SUBSCRIBE]:({model:e,closeClickHandler:t})=>{let i=(0,e5.n3)(e);return r.createElement(al,{content:r.createElement(tn.Z,{messageId:"viewCam.notifications.dontMissMe"}),controls:r.createElement(as.Z,{buttonLocation:M.FO.VIEWCAM_PLAYER_SUBSCRIBE_PROMO,preventResponsiveCaption:!0,style:"blue",subscribeCaption:r.createElement(tn.Z,{messageId:"button.notifyMe"}),user:e,withoutTooltip:!0}),image:r.createElement(ar.Z,{isBorderAvatar:!1,user:(0,tt.T$)(e),modelData:i,showOnlineStatus:!1}),closeClickHandler:t})}};class ac extends r.Component{componentDidMount(){(0,U.Z)(this.propsUpdateToActionsMap,{},this.props)}componentDidUpdate(e){(0,U.Z)(this.propsUpdateToActionsMap,e,this.props)}componentWillUnmount(){this.props.closeNotification()}renderNotification(){let{model:e,notification:t}=this.props,i=ao[t];return i?r.createElement(iS.CSSTransition,{classNames:"children-transition",timeout:500},r.createElement(i,{closeClickHandler:this.closeClickHandler,model:e})):null}render(){let{playerType:e}=this.props;return r.createElement(iS.TransitionGroup,{className:(0,L.AK)(["view-cam-notifications",e?`view-cam-notifications-${e}`:""])},this.renderNotification())}constructor(...e){super(...e),(0,s._)(this,"propsUpdateToActionsMap",[{update:["model.id"],action:()=>{let{notification:e}=this.props;e===i1.h3.SUBSCRIBE&&this.props.closeNotification()}}]),(0,s._)(this,"closeClickHandler",()=>{this.props.closeNotification()})}}let ad=(0,l.$j)(e=>({notification:(0,eh.O5)(e),playerType:(0,u.Aq)(e)}),an)(ac);var au=i(20159),am=i(5637),ap=i(61250);let ah=({duration:e,onOverlimit:t})=>((0,ap.Z)(t,e),null);var av=i(17473);let aE=({text:e})=>r.createElement("div",{className:"vc-status-hint"},r.createElement("div",{className:"vc-status-hint-icon-box"},r.createElement(e7.Z,{img:"hint",className:"vc-status-hint-icon"})),r.createElement("div",{className:"vc-status-hint-text"},e)),ag=e=>!!(e&&"number"!=typeof e&&"object"!=typeof e&&"boolean"!=typeof e),aS=({className:e})=>{let{trans:t,formatTime:i}=(0,e9.QT)(),a=(0,o.C)(eh.CR),s=(0,o.C)(F.lY),[l,n]=(0,r.useState)(new Date);if((0,r.useEffect)(()=>{let e=setInterval(()=>n(e=>new Date(e.getTime()+1e3)),1e3);return()=>clearInterval(e)},[]),null==a)return null;let c=(0,iq.og)(l.getTime()+s,a),d=c<36e5?iq.TIME_FORMATS.MINUTES_SECONDS:iq.TIME_FORMATS.HOURS_MINUTES_SECONDS;return r.createElement("div",{suppressHydrationWarning:!0,className:(0,L.AK)("vc-status-elapsed-show-time",e)},t("viewCamStatuses.heading.showIsOn",{duration:i(c,d)}))},aC=({headingIcon:e,headingText:t,withElapsedShowTime:i,subheadingText:a,bodyText:s,controls:l,footerText:n,backdropMode:o,underControlsText:c})=>r.createElement(r.Fragment,null,r.createElement(av.M,{mode:o}),r.createElement("div",{className:"vc-status-body"},e&&(ag(e)?r.createElement(e7.Z,{img:e,className:"vc-status-heading-icon"}):e),r.createElement("div",{className:"vc-status-heading-text"},t),i&&r.createElement(aS,null),a&&r.createElement("div",{className:"vc-status-subheading-text"},"",a,""),s&&r.createElement("div",{className:"vc-status-body-text"},s),l&&r.createElement("div",{className:"vc-status-controls"},l),c&&r.createElement("div",{className:"vc-status-undercontrols-text"},c)),n&&r.createElement("div",{className:"vc-status-footer"},r.createElement(aE,{text:n}))),ab=e=>{if(!e)return null;let t={[C.MODEL_STATUSES.STATUS_VIRTUAL_PRIVATE]:C.MODEL_STATUSES.STATUS_PRIVATE};return`status-${t[e]||e}`},af=({model:{status:e},...t})=>{let i=(0,n.T)();return r.createElement("div",{className:(0,L.AK)(["vc-status",ab(e)])},e?r.createElement(aC,t):r.createElement(r.Fragment,null,r.createElement(ah,{duration:15e3,onOverlimit:()=>{i((0,ei.t$)("error","viewCamStatusVideoLoadingTooLong",{}))}}),r.createElement(eC.Z,{isCentered:!0})))},aT={emitButtonEvent:P.d2,showModal:y.K4,joinToGroupShow:p.W6,loadActiveApps:au.UQ};class ay extends r.Component{render(){let{model:e,model:{username:t},description:i,isTicketShow:a,isOngoingTicketShowAvailable:s,viewCamShow:l}=this.props;return(null==l?void 0:l.details.groupShow)?r.createElement(af,{model:e,withElapsedShowTime:!0,backdropMode:this.getBackdropMode(),headingIcon:a?r.createElement("div",{className:"vs-status-ticket-show-wrapper"},r.createElement(e7.Z,{img:"ticket",size:48}),s&&r.createElement(e7.Z,{img:"success-check-white",size:22,className:"vs-status-ticket-show-check-icon"})):"group",headingText:r.createElement(tn.Z,{messageId:`viewCamStatuses.heading.${a?"ticketShow":"groupShow"}`,elements:{strong:r.createElement("strong",null)},parameters:{username:t}}),subheadingText:i,controls:this.getControls(),underControlsText:this.getUnderControlsText()}):null}constructor(...e){super(...e),(0,s._)(this,"showJoinGroupShow",()=>{let{model:e,isExtensionsForTicketGroupShowsEnabled:t,isOngoingTicketShowAvailable:i}=this.props;if(!i){t_.P4.show(am.G,{});return}this.props.joinToGroupShow(),t&&this.props.loadActiveApps(e.id)}),(0,s._)(this,"getControls",()=>{let{isModelOrStudio:e,isOngoingTicketShowAvailable:t,model:i,isPriceInsideJoinGroupShowButtonEnabled:a,isTicketShow:s,i18n:l,ticketShowRemainingPrice:n,isWatchShowButtonEnabled:o}=this.props;return e?null:r.createElement(tm.ZP,{className:"vc-status-private-btn",onClick:this.showJoinGroupShow,style:t?"apply":"gold-ds",size:"medium"},r.createElement(tn.Z,{messageId:`button.${t?"returnToShow":o?"watchNow":"joinNow"}`}),a&&i&&!t&&r.createElement(r.Fragment,null,"\xa0",s?l.trans("tokensShort",{amount:n}):l.trans("privateRequest.price",{amount:i.groupRate})))}),(0,s._)(this,"getUnderControlsText",()=>{let{watchers:e,isOngoingTicketShowAvailable:t,isWatchShowButtonEnabled:i}=this.props;return r.createElement(r.Fragment,null,t&&r.createElement(tn.Z,{className:"vc-status-undercontrols-text--accent",messageId:"viewCamStatuses.body.alreadyHaveTicket",parameters:{watchers:e}}),e>=2&&!t&&r.createElement(tn.Z,{className:"vc-status-undercontrols-text--regular",messageId:i?"viewCamStatuses.body.groupShowWatchingNew":"viewCamStatuses.body.groupShowWatching",parameters:{watchers:e}}))}),(0,s._)(this,"getBackdropMode",()=>{let{isBlurVideoOnPrivate:e}=this.props;return e?"soft":"transparent"})}}let aw=(0,e9.GV)(ay),aP=(0,l.$j)((e,t)=>{let i=(0,h.Tn)(e)||t.model.groupShowType===C.G$M.TICKET;return{description:(0,h.cj)(e),isModelOrStudio:(0,te.ly)(e),watchers:(0,h.xO)(e),isOngoingTicketShowAvailable:i&&(0,eh._u)(e),isTicketShow:i,isExtensionsForTicketGroupShowsEnabled:(0,c.RHc)(e),viewCamShow:(0,h.Yq)(e),isBlurVideoOnPrivate:(0,u.$C)(e),isPriceInsideJoinGroupShowButtonEnabled:(0,G.RQ)(e),isWatchShowButtonEnabled:(0,G.B0)(e),ticketShowRemainingPrice:(0,h.Le)(e)}},aT)(aw),aN={wrapper:"ViewCamGroupV2__wrapper#VU",timer:"ViewCamGroupV2__timer#Hs",joinBtn:"ViewCamGroupV2__joinBtn#f3",iconContainer:"ViewCamGroupV2__iconContainer#dC",icon:"ViewCamGroupV2__icon#zi",subIcon:"ViewCamGroupV2__subIcon#Zp",title:"ViewCamGroupV2__title#nu",descriptionBlock:"ViewCamGroupV2__descriptionBlock#rC",avatar:"ViewCamGroupV2__avatar#FZ",watchersBlock:"ViewCamGroupV2__watchersBlock#Tz",haveTicket:"ViewCamGroupV2__haveTicket#OE",fires:"ViewCamGroupV2__fires#sO",watchers:"ViewCamGroupV2__watchers#Wo",watchersAccent:"ViewCamGroupV2__watchersAccent#R2"},a_=(e,t,i)=>{let a="";return i?(["female","group"].includes(e)?t>=10&&t<=35?a="\uD83D\uDD25":t>=36&&t<=70?a="\uD83D\uDD25\uD83D\uDD25":t>=71&&t<=149?a="\uD83D\uDD25\uD83D\uDD25\uD83D\uDD25":t>=150&&(a="\uD83D\uDD25\uD83D\uDD25\uD83D\uDD25\uD83D\uDD25\uD83D\uDD25"):t>=5&&t<=10?a="\uD83D\uDD25":t>=11&&t<=20?a="\uD83D\uDD25\uD83D\uDD25":t>=21&&(a="\uD83D\uDD25\uD83D\uDD25\uD83D\uDD25"),a):""},ak=({model:e})=>{let t=(0,e5.n3)(e),{trans:i}=(0,e9.QT)(),a=(0,n.T)(),s=(0,o.C)(h.Tn),l=(0,o.C)(h.cj),c=(0,o.C)(ex.ly),d=(0,o.C)(h.xO),m=(0,o.C)(eh._u),v=(0,o.C)(u.$C),E=(0,o.C)(G.NF),g=(0,o.C)(h.Le),S=(0,o.C)(G.RQ),b=s||e.groupShowType===C.G$M.TICKET,f=a_(e.broadcastGender,d,E);return r.createElement("div",{className:(0,L.AK)(aN.wrapper,"vc-status")},v&&r.createElement(av.M,{mode:"soft"}),r.createElement("span",{className:aN.iconContainer},b?r.createElement(r.Fragment,null,r.createElement(e7.Z,{img:"ticket",className:aN.icon}),m&&r.createElement(e7.Z,{img:"success-check-white",className:aN.subIcon})):r.createElement(e7.Z,{img:"group",className:aN.icon})),r.createElement(tn.Z,{messageId:`viewCamStatuses.heading.${b?"ticketShow":"groupShow"}`,parameters:{username:e.username},elements:{strong:r.createElement("strong",null)},className:aN.title}),r.createElement(aS,{className:aN.timer}),r.createElement("div",{className:aN.descriptionBlock},r.createElement(ar.q,{user:(0,tt.T$)(e),className:aN.avatar,showOnlineStatus:!1,isBorderAvatar:!1,modelData:t}),r.createElement("span",null,"",l,"")),!c&&r.createElement(ty.ZP,{style:m?"apply":"gold-ds",onClick:()=>{if(!m){t_.P4.show(am.G,{});return}a((0,p.W6)()),a((0,au.UQ)(e.id))},className:aN.joinBtn,size:"medium"},i(`button.${m?"returnToShow":"joinNow"}`),S&&e&&!m&&r.createElement(r.Fragment,null," ",b?i("tokensShort",{amount:g}):i("privateRequest.price",{amount:e.groupRate}))),r.createElement("div",{className:aN.watchersBlock},m?r.createElement("span",{className:aN.haveTicket},i("viewCamStatuses.body.alreadyHaveTicket",{watchers:d})):r.createElement(r.Fragment,null,f&&r.createElement("div",{className:aN.fires},f),r.createElement("div",{className:(0,L.AK)(aN.watchers,{[aN.watchersAccent]:!!f})},d>=2&&i("viewCamStatuses.body.groupShowWatching",{watchers:d})))))},aA=({model:{username:e}})=>r.createElement("div",{className:"vc-status status-idle"},r.createElement("div",{className:"clock-wrapper"},r.createElement(e7.Z,{img:"time-clock"})),r.createElement("div",{className:"status"},r.createElement(tn.Z,{className:"status-text",messageId:"viewCam.poster.idle",parameters:{username:e}})));var aI=i(6035);let aM=()=>{let e=(0,o.C)(eW.M7),t=(0,n.T)();return r.createElement(tm.ZP,{className:"lets-chat-plasma",style:"lets-chat-plasma",onClick:()=>{e?t_.P4.show(aI.K,{}):t((0,e$.cS)(I.Dt.SIGNUP_PLASMA_OFFLINE,{type:"chatPlasma"}))}},r.createElement("div",{className:"plasma-icon"}),r.createElement(tn.Z,{messageId:"plasma.startChat"}))};var aR=i(48233),aL=i(4289),aO=i(70104);let aU=(0,l.$j)(function(e){return{next:(0,aO.to)(e),modelUsername:e.viewCam.modelUsername}})(({modelUsername:e,next:t})=>{let{formatTime:i,getWeekDay:a,trans:s}=(0,e9.QT)(),l=(0,r.useRef)(null),[n,o]=(0,r.useMemo)(()=>{var e;return null!==(e=null==t?void 0:t.period)&&void 0!==e?e:[]},[t]),c=(0,r.useMemo)(()=>(0,iq.YF)(new Date,iq.Ju.day),[]),d=(0,r.useMemo)(()=>(0,iq.yG)(c,{seconds:null!=n?n:0}),[c,n]),u=(0,r.useMemo)(()=>(0,iq.yG)(c,{seconds:null!=o?o:0}),[c,o]),m=(0,r.useMemo)(()=>{var e;return a(M.tz.indexOf(null!==(e=null==t?void 0:t.day)&&void 0!==e?e:"mon"))},[t,a]);return(null==t?void 0:t.day)&&(n||o)?r.createElement("div",{className:"schedule-next-informer"},r.createElement(e7.Z,{img:"calendar"})," ",s("schedule.nextBroadcast"),":"," ",r.createElement(aL.OL,{to:{pathname:`/${e}/profile#schedule`},className:"schedule-next-informer__link"},r.createElement("span",{ref:l},r.createElement(e7.Z,{img:"info-circle"}),r.createElement(ii.Z,{targetRef:l,isMobileRelative:!1,shouldPreventDefault:!0,placement:"top"},s("schedule.tooltip.yourLocalTime"))),r.createElement("span",{className:"schedule-next-informer__weekday"},r.createElement("span",{className:"schedule-next-informer__weekday-short"},s(`weekdaysAbbr.${t.day}`)),r.createElement("span",{className:"schedule-next-informer__weekday-full"},m)),"\xa0",i(d,iq.TIME_FORMATS.TIME),"\xa0\xa0",i(u,iq.TIME_FORMATS.TIME),r.createElement(e7.Z,{img:"chevron-right"}))):null});var aZ=i(75997);let aB={toggleModelNotifications:tF.oj},aV=(0,l.$j)((e,t)=>{let{model:i}=t;return{isSubscribed:(0,t$.LW)(e,i.id),isCurrentUserModelOrStudio:(0,ex.ly)(e)}},aB)(({icon:e="bell",isCurrentUserModelOrStudio:t,isSubscribed:i,model:a,toggleModelNotifications:s})=>{let l=(0,n.T)(),{trans:o}=(0,e9.QT)();return!a.isModel||t?null:r.createElement("div",{className:"subscribe-switch-container"},r.createElement(e7.Z,{img:e}),r.createElement("span",{className:"subscribe-caption"},o("switcher.subscription.subscribe")),r.createElement(aZ.Z,{className:"subscribe-switch",iconImg:"check-1",isChecked:i,onChange:(e,t)=>{t.stopPropagation(),s({model:a,buttonLocation:M.FO.SUBSCRIBE}),e&&l((0,P.Vg)(!0))},size:"small",theme:"light"}))});var aD=i(85037),aF=i(71520);let aW=()=>{let{trans:e}=(0,e9.QT)(),{isLayoutUpToL:t}=(0,ia.do)("isLayoutUpToL");return r.createElement(aF.Lp,{source:I.mw.OFFLINE_SHUTTER},r.createElement(aD.m,{tooltipPlacement:t?"bottom":"right",className:"add-to-calendar-from-offline-view-cam",buttonClassName:"add-to-calendar-from-offline-view-cam__button",iconClassName:"add-to-calendar-from-offline-view-cam__icon"},r.createElement("span",{className:"media-up-to-m-hidden add-to-calendar-from-offline-view-cam__text"},e("viewCam.addToCalendar.button"))))};var a$=i(79866);let ax=(0,l.$j)(e=>({timeDelta:(0,F.lY)(e),isPlasmaAvailable:(0,h.M9)(e),isModel:(0,te.A4)(e),shouldShowAddToCalendarButton:(0,aO.rf)(e)}))(({model:e,timeDelta:t,isPlasmaAvailable:i,isModel:a,shouldShowAddToCalendarButton:s})=>{let l=(0,e9.QT)(),{getFormattedDateFrom:n,trans:d}=l,u=(0,r.useRef)(null),[m,p]=(0,r.useState)(!0),h=(0,e5.n3)(e),v=(0,o.C)(c.HwD);(0,ia.i6)(["windowWidth","windowHeight"],()=>{if(u.current){var e,t,i;p(((null===(t=(i=u.current).getBoundingClientRect)||void 0===t?void 0:null===(e=t.call(i))||void 0===e?void 0:e.height)||0)>500)}});let E=(0,a$.Z)(e)&&!v,g=E?"available":"offline",S=(0,a$.x)({isPlasmaAvailable:i,isOfflinePrivateAvailable:E,i18n:l}),C=e.wentIdleAt||e.statusChangedAt,b=new Date(Date.now()+t);return r.createElement("div",{ref:u,className:"vc-status-offline"},r.createElement("div",{className:"vc-status-offline-inner"},r.createElement("div",null,r.createElement("div",{className:(0,L.AK)("vc-status-avatar-container",{"avatar-hidden":!m})},r.createElement(ar.Z,{className:"vc-status-offline-avatar",isBorderAvatar:!1,user:(0,tt.T$)(e),modelData:h}),r.createElement("div",{className:(0,L.AK)("availability-status",g)},d(`viewCamStatuses.offline.availabilityStatus.${g}`)))),r.createElement("div",null,C&&r.createElement("div",{className:"offline-status-time",suppressHydrationWarning:!0},d("viewCam.wasOnline",{lastTimeLabel:n(C,b,!1)}))),r.createElement("div",null,e.offlineStatus&&r.createElement(ii.Z,{className:"offline-status",isForceVisible:!0,placement:"bottom"},r.createElement(e7.Z,{img:"megaphone-bold"}),r.createElement("span",null,e.offlineStatus))),r.createElement("div",null,!a&&r.createElement(r.Fragment,null,!!S&&r.createElement("div",{className:"private-and-start-chatting-mobile-title"},r.createElement("div",null,S)),r.createElement("div",{className:"private-and-start-chatting"},E&&r.createElement("div",{className:"private-and-start-chatting-card"},r.createElement("div",{className:"private-and-start-chatting-title"},d("viewCamStatuses.offline.requestPrivate.title")),r.createElement("div",{className:"private-and-start-chatting-body"},d("viewCamStatuses.offline.requestPrivate.body")),r.createElement(aR.Z,{model:e,className:"private-and-start-chatting-button"})),i&&r.createElement("div",{className:(0,L.AK)("private-and-start-chatting-card",{single:!E})},r.createElement("div",{className:"private-and-start-chatting-title"},d("viewCamStatuses.offline.plasma.title")),r.createElement("div",{className:"private-and-start-chatting-body"},d("viewCamStatuses.offline.plasma.body")),r.createElement("div",{className:"private-and-start-chatting-button"},r.createElement(aM,null)))))),r.createElement("div",{className:"vc-status-offline-bottom"},r.createElement("div",{className:"vc-status-next-broadcast"},r.createElement(aU,null))),r.createElement("div",{className:"vc-status-subscribe"},r.createElement(aV,{key:e.id,model:e,icon:"notifications-2"}),s&&r.createElement(r.Fragment,null,r.createElement("div",{className:"vc-status-offline__button-divider"}),r.createElement(aW,null)))))}),aH=(0,l.$j)(e=>({isModelOrStudio:(0,te.ly)(e)}))(({isModelOrStudio:e,model:t,model:{username:i}})=>r.createElement(af,{model:t,headingIcon:"lock-1",headingText:r.createElement(tn.Z,{messageId:`viewCamStatuses.heading.${e?"exclusivePrivateShort":"exclusivePrivate"}`,parameters:{username:i}}),bodyText:e?null:r.createElement(tn.Z,{messageId:"viewCamStatuses.body.whenExclusivePrivateEnds"}),footerText:e?null:r.createElement(tn.Z,{messageId:"viewCamStatuses.hint.default"})})),aK={emitButtonEvent:P.d2};class aG extends r.Component{render(){let{canSpy:e,isModelOrStudio:t,model:i,model:{username:a}}=this.props;return r.createElement(af,{model:i,backdropMode:this.getBackdropMode(),headingIcon:"spy-on",headingText:r.createElement(tn.Z,{messageId:t?"viewCamStatuses.heading.privateShort":"viewCamStatuses.heading.private",parameters:{username:a}}),bodyText:t?null:r.createElement(tn.Z,{messageId:`viewCamStatuses.body.${e?"reveal":"whenPrivateEnds"}`}),controls:this.getControls(),footerText:t?null:r.createElement(tn.Z,{messageId:`viewCamStatuses.hint.${e?"chanceToSpy":"default"}`})})}constructor(...e){super(...e),(0,s._)(this,"startSpyClickHandler",()=>{let{model:{id:e}}=this.props;this.props.emitButtonEvent(M.FO.VIEWCAM_START_SPY,{modelId:e})}),(0,s._)(this,"getBackdropMode",()=>{let{canSpy:e,isBlurVideoOnPrivate:t}=this.props;return t?"soft":e?"flashlight":""}),(0,s._)(this,"getControls",()=>{let{canSpy:e,isFanClubFreeSpyAvailableForCurrentUser:t,isFreeSpyTrialAvailable:i}=this.props;return e?r.createElement(r.Fragment,null,r.createElement(tm.ZP,{className:"vc-status-private-btn",size:"medium",style:"apply-alter",onClick:this.startSpyClickHandler},r.createElement(e7.Z,{img:"spy-on",className:"vc-status-private-btn-icon"}),r.createElement(tn.Z,{messageId:"button.spyOn",parameters:{username:this.props.model.username}})),!t&&i&&r.createElement(tn.Z,{className:"vc-status-first-some-seconds-free",messageId:"viewCamStatuses.body.firstSomeSecondsFree",choiceParameter:"time",parameters:{time:C.LOf},elements:{green:r.createElement("span",{className:"vc-status-first-some-seconds-free-green"})}})):null})}}let aj=(0,l.$j)((e,t)=>{let i=(0,te.ly)(e),a=(0,eh._W)(e);return{canSpy:!!t.model.doSpy&&!i,isModelOrStudio:i,isFanClubFreeSpyAvailableForCurrentUser:(0,tU.aw)(a),isFreeSpyTrialAvailable:(0,h.fj)(e),isBlurVideoOnPrivate:(0,u.$C)(e)}},aK)(aG),az=({model:e=null})=>{let t=(0,o.C)(G.NF);if(!e)return null;switch(e.status){case C.MODEL_STATUSES.STATUS_OFF:return r.createElement(ax,{model:e});case C.MODEL_STATUSES.STATUS_IDLE:return r.createElement(aA,{model:e});case C.MODEL_STATUSES.STATUS_PRIVATE:case C.MODEL_STATUSES.STATUS_VIRTUAL_PRIVATE:return r.createElement(aj,{model:e});case C.MODEL_STATUSES.STATUS_P2P:case C.MODEL_STATUSES.STATUS_P2P_VOICE:return r.createElement(aH,{model:e});case C.MODEL_STATUSES.STATUS_GROUP_SHOW:return t?r.createElement(ak,{model:e}):r.createElement(aP,{model:e});case C.MODEL_STATUSES.STATUS_PUBLIC:return null;default:return r.createElement(af,{model:e})}};var aq=i(23489),aY=i(89166),aQ=i(76603);let aJ=(e,t,i)=>{let a=r.useRef(null),s=r.useRef(null),l=r.useRef(!1),n=r.useRef(!1),o=r.useRef(e),c=r.useRef(t),d=r.useRef(performance.now());r.useEffect(()=>{c.current=t},[t]),r.useEffect(()=>{o.current=e},[e]);let u=r.useCallback(()=>{o.current&&c.current&&!n.current&&(a.current&&clearTimeout(a.current),aQ.q.metrics.histogram("time_to_play_readiness",(performance.now()-d.current)/1e3,"seconds",{playerType:c.current}),n.current=!0)},[]),m=r.useCallback(()=>{l.current||(l.current=!0,u())},[u]),p=r.useCallback(()=>{s.current&&s.current.addEventListener("play",m)},[m]),h=r.useCallback(()=>{s.current&&s.current.removeEventListener("play",m)},[m]);r.useEffect(()=>{h(),s.current=i,p()},[p,h,i]),r.useEffect(()=>()=>{a.current&&clearTimeout(a.current)},[]);let v=r.useCallback(()=>{a.current&&clearTimeout(a.current),l.current=!1,n.current=!1,d.current=performance.now(),a.current=setTimeout(u,1e4)},[u]);r.useEffect(()=>{v()},[e,t,v])},aX=()=>{let e=(0,o.C)(h.PD),t=(0,o.C)(u.Aq);return aJ(null==e?void 0:e.id,t,(0,eE.zI)()),null},a0={initRatePrivateModal:e$.fm,beginModelWatching:p.yS,beginVrModelWatching:p._s,cancelProposal:e$.sA,closeNotification:e$.vU,createFreeAccountModal:e$.cS,emitButtonEvent:P.d2,goToModel:e$.dX,resetViewCam:e$.mc,shadeLayout:w.Xk,showModal:y.K4,stopShow:e$.a$,stopSpy:e$.Kp,changeVolume:j.v6,updatePlayerWasInPlayedState:p.ll,updateHLSStreamEndedState:p.zH,updateViewCamBaseRealResolution:aq.dI},a1=(e,t)=>{var i,a;return(null==e?void 0:null===(i=e.model)||void 0===i?void 0:i.id)!==(null==t?void 0:null===(a=t.model)||void 0===a?void 0:a.id)},a2=(e,t)=>a1(e,t)||(null==e?void 0:e.playerType)!==(null==t?void 0:t.playerType),a6=(e,t)=>{var i,a;return(null==e?void 0:null===(i=e.model)||void 0===i?void 0:i.id)!==(null==t?void 0:null===(a=t.model)||void 0===a?void 0:a.id)},a8=(e,t)=>{var i,a;return e&&(0,T.tB)({needVerifyAge:e.needVerifyAge,isNonNudeCategoryEnabled:e.isNonNudeCategoryEnabled,isModelNonNude:null===(i=e.model)||void 0===i?void 0:i.isNonNude})&&!(0,T.tB)({needVerifyAge:t.needVerifyAge,isNonNudeCategoryEnabled:t.isNonNudeCategoryEnabled,isModelNonNude:null===(a=t.model)||void 0===a?void 0:a.isNonNude})},a3=(e,t)=>!e.snapshotUrl&&!!t.snapshotUrl||a8(e,t)||a6(e,t);class a7 extends r.Component{componentDidMount(){this._isMounted=!0,this.props.updatePlayerWasInPlayedState(!1),(0,U.Z)(this.propsUpdateToActionsMap,{},this.props),(0,Z.H0)(this,document,"keydown",this.viewCamBlockKeyDownHandler),(0,Z.H0)(this,window,"beforeunload",this.onBeforeUnloadEventHandler),(0,Z.H0)(this,window,"unload",this.onBeforeUnloadEventHandler),(0,Z.H0)(this,window,"pagehide",this.onBeforeUnloadEventHandler)}componentDidUpdate(e){(0,U.Z)(this.propsUpdateToActionsMap,e,this.props)}componentWillUnmount(){this._isMounted=!1;let{model:e,modelListSectionName:t}=this.props;e&&this.props.resetViewCam({pageSection:t,isResetViewCamConfig:!0,isResetActiveApps:!0,shouldSendWatchTimeWithBeacon:!1}),(0,Z.OM)(this)}checkShowNonNudeShutter(){let{needVerifyAge:e,model:t,isNonNudeCategoryEnabled:i}=this.props;return(0,T.tB)({needVerifyAge:e,isNonNudeCategoryEnabled:i,isModelNonNude:null==t?void 0:t.isNonNude})}renderSocket(){let{isPrivateEndedNewSocketEventEnabled:e,isUserFanClubActive:t,isAppBotsEnabled:i,currentUserId:a,isLoggedIn:s,model:l}=this.props,n=l?[a?`userBanned@${l.id}#${a}`:`userBanned@${l.id}`,`goalChanged@${l.id}`,`broadcastSettingsChanged@${l.id}`,`tipMenuUpdated@${l.id}`,`topicChanged@${l.id}`,`userUpdated@${l.id}`,`interactiveToyStatusChanged@${l.id}`,a?`groupShow@${l.id}#${a||""}`:`groupShow@${l.id}`,`deleteChatMessages@${l.id}`,`tipLeaderboardSettingsUpdated@${l.id}`,`modelStatusChanged@${l.id}`,`tipMenuLanguageDetected@${l.id}`,...t?[`fanClubUpdated@${l.id}`]:[],...i?[`modelAppUpdated@${l.id}`]:[]]:[],o=[];s&&(o.push(`userBroadcastServerChanged@${a}`,`interactiveToyStatusChanged@${a}`),e&&o.push(`privateEnded@${a}#${a}`));let c=[];l&&s&&(c.push(`privateStarted@${l.id}#${a}`,`spyChanged@${l.id}#${a}`,`knightChanged@${l.id}`,`userUnbanned@${l.id}#${a}`),e||c.push(`privateRecordingSaveConfirmation@${l.id}#${a}`,`privateStopped@${l.id}#${a}`)),l&&c.push(`modelDiscountActivated@${l.id}`);let d=[];return l&&a&&!e&&d.push({subscriptionKey:`ratePrivate@${l.id}#${a}`,callback:this.ratePrivateEventHandler}),r.createElement(k.Z,{events:["lotteryChanged",...n,...o,...c],eventsWithCallbacks:d})}renderControlsWrapper(){let{isCamAvailable:e,isPromoModel:t,model:i,shouldRenderPlayerOnBackground:a,isBlurVideoOnPrivate:s,isBackgroundVideoForAvpShutter:l}=this.props;return t||a&&!l||s?null:r.createElement(iO,{isCamAvailable:e,model:i})}renderViewCamContent(){let{shouldRenderPlayer:e,shouldRenderPlayerOnBackground:t,isBlurVideoOnPrivate:i}=this.props;return this.checkShowNonNudeShutter()?r.createElement(r.Fragment,null,e&&t&&this.renderPlayer(),this.renderNonNude()):e&&t||i?r.createElement(r.Fragment,null,this.renderPoster(),this.renderPlayer()):e?this.renderPlayer():this.renderPoster()}render(){let{isViewCamInfoVisible:e,model:t,shouldRenderPlayer:i,isWebRTCSupported:a,isVerticalStream:s,shouldRenderPlayerOnBackground:l,isBlurVideoOnPrivate:n}=this.props;return r.createElement(ep.Z,{isViewCamPoster:!i&&!!t||this.checkShowNonNudeShutter()||l||n,className:"view-cam",isVerticalStream:s},a&&r.createElement(E,null),t&&r.createElement(aa,{model:t}),t&&r.createElement(ad,{model:t}),t&&r.createElement(Y,null),r.createElement("div",{className:"wrapper",onClick:this.playerWrapperClickHandler},r.createElement("div",{className:(0,L.AK)("main",(0,aY.vs)(this.props))},r.createElement("div",{className:(0,L.AK)("strut",ep.j.boundaryY)},r.createElement(N.Z,null,this.renderViewCamContent())))),this.renderControlsWrapper(),r.createElement(ix,{isVisible:e}),this.renderSocket())}constructor(e){super(e),(0,s._)(this,"isWatchingSuspended",!1),(0,s._)(this,"visibilityChangeCount",0),(0,s._)(this,"_isMounted",!1),(0,s._)(this,"preloadAndSetNextSnapshot",e=>{var t;let i=null===(t=this.props.model)||void 0===t?void 0:t.id;this.setState({lastSnapshotUrl:void 0},()=>{if(!e||!this._isMounted)return;let t=new Image;t.addEventListener("load",()=>{var t;i===(null===(t=this.props.model)||void 0===t?void 0:t.id)&&this._isMounted&&this.setState({lastSnapshotUrl:e})}),t.src=e})}),(0,s._)(this,"propsUpdateToActionsMap",[{update:(e,t)=>!!e.isSocketReady&&!t.isSocketReady,action:()=>{let{isSocketReady:e,isInPrivate:t,privateMode:i}=this.props;!e&&t&&(i?(O.ZP.addSource(O.OF.USER_SOCKET_NOT_WORKING),B.Z.send(O.OF.USER_SOCKET_NOT_WORKING),this.props.stopShow("socketNotReady")):this.props.cancelProposal("socketNotReady"),this.props.shadeLayout(!1))}},{update:a3,action:()=>{let{snapshotUrl:e}=this.props;e&&!this.checkShowNonNudeShutter()&&this.preloadAndSetNextSnapshot(e)}},{update:a6,action:()=>{let{model:e}=this.props;(null==e?void 0:e.isVr)&&this.props.beginVrModelWatching(e)}},{update:a1,action:()=>{this.props.updatePlayerWasInPlayedState(!1)}},{update:a2,action:()=>{let{isDocumentVisible:e,model:t}=this.props;this.isWatchingSuspended=!e,!this.isWatchingSuspended&&t&&this.props.beginModelWatching(t)}},{update:$.Kh,action:()=>{let{isDocumentVisible:e,model:t}=this.props;e&&t&&(this.props.beginModelWatching(t),this.isWatchingSuspended=!1)}},{update:["shouldShadeLayout"],action:()=>{let{shouldShadeLayout:e}=this.props;this.props.shadeLayout(e)}},{update:["shouldRenderPlayer"],action:()=>{let{shouldRenderPlayer:e}=this.props;e||(this.props.updatePlayerWasInPlayedState(!1),this.props.updateHLSStreamEndedState(!1))}},{update:["isDocumentVisible","shouldRenderPlayerOnBackground"],action:()=>{if(this.visibilityChangeCount++,this.props.shouldRenderPlayerOnBackground){this.props.changeVolume(0,!1);return}if(this.visibilityChangeCount<=1)return;let{isDocumentVisible:e}=this.props;if(M.BROWSER_CAPABILITIES.isMobile||M.BROWSER_CAPABILITIES.isTablet||this.props.isTicketShow){if(e){let e=V.m.get(C.dAu.PLAYER_VOLUME);this.props.changeVolume("number"==typeof e?e:50,!1)}else this.props.changeVolume(0,!1)}}}]),(0,s._)(this,"onBeforeUnloadEventHandler",()=>{let{isInPrivate:e,isInSpyMode:t}=this.props;if(t||e){O.ZP.addSource(O.OF.USER_CLOSE_BROWSER_IN_PRIVATE);return}this.props.resetViewCam({isResetViewCamConfig:!1,isResetActiveApps:!1,shouldSendWatchTimeWithBeacon:!0,pageSection:this.props.modelListSectionName})}),(0,s._)(this,"viewCamBlockKeyDownHandler",e=>{let{ctrlKey:t,keyCode:i}=e,{isCurrentUserModelOrStudio:a,isCamAvailable:s,isOwnShow:r,model:l,isNextModelAvailable:n,isPrevModelAvailable:o}=this.props,c=(null==l?void 0:l.status)===C.MODEL_STATUSES.STATUS_PRIVATE||(null==l?void 0:l.status)===C.MODEL_STATUSES.STATUS_VIRTUAL_PRIVATE,d=!r&&!(s&&c),u=i===M.KEY_CODES.sChar,m=i===M.KEY_CODES.comma,p=i===M.KEY_CODES.period;t&&((u||m||p)&&(e.preventDefault(),e.stopPropagation()),r||c||!u||a||this.startPurchaseTokensModalWizard(),m&&d&&o&&this.props.goToModel("prev"),p&&d&&n&&this.props.goToModel("next"))}),(0,s._)(this,"goToNextModel",()=>{this.props.goToModel("next")}),(0,s._)(this,"playerWrapperClickHandler",()=>{this.props.closeNotification()}),(0,s._)(this,"startPurchaseTokensModalWizard",()=>{this.props.showModal(M.Ny.SEND_TIP,{user:this.props.model})}),(0,s._)(this,"ratePrivateEventHandler",e=>{var t;let i=null===(t=this.props.model)||void 0===t?void 0:t.id;i&&this.props.initRatePrivateModal(e,i)}),(0,s._)(this,"getPosterImageUrl",()=>{let{model:e,isModelInGroupShow:t,isNonNudeWL:i}=this.props;if(!e||i)return;let{lastSnapshotUrl:a}=this.state,s=a||e.previewUrl;return t?s:e.previewUrl}),(0,s._)(this,"renderNavButtons",()=>r.createElement("div",{className:"view-cam-room-nav"},r.createElement(A.Z,{id:"room_nav_next",type:"next-small",onClick:this.goToNextModel,pageNumber:0}))),(0,s._)(this,"renderViewStatus",()=>{let{model:e}=this.props;return r.createElement(az,{model:e||null})}),(0,s._)(this,"renderPoster",()=>{let{model:e,isNextModelAvailable:t,isNonNudeWL:i,shouldRenderPlayerOnBackground:a,isBlurVideoOnPrivate:s,isViewCamDataReady:l}=this.props,n=this.getPosterImageUrl();return r.createElement(iH,{modelStatus:null==e?void 0:e.status,modelName:null==e?void 0:e.username,isNonNudeWL:i,posterImageUrl:l?n:void 0,isBackgroundVideo:a,shouldBeBlurred:a,isBlurVideoOnPrivate:s},t&&this.renderNavButtons(),this.renderViewStatus())}),(0,s._)(this,"renderShutter",()=>{let{model:e,isNonNudeWL:t}=this.props,i=this.getPosterImageUrl();return r.createElement(iH,{modelStatus:null==e?void 0:e.status,modelName:null==e?void 0:e.name,isNonNudeWL:t,posterImageUrl:i},r.createElement(e4,null))}),(0,s._)(this,"renderNonNude",()=>{let{model:e,shouldRenderPlayer:t,shouldRenderPlayerOnBackground:i,isViewCamDataReady:a}=this.props,s=i&&t||!a,l=s||!a;return r.createElement(g.u,{isViewcam:!0,model:e?(0,tt.T$)(e):e,modelData:e?(0,e5.tA)(e):void 0,isTranslucent:s,hideSnapshot:l},r.createElement(S.R,{isViewcam:!0,isForceWhiteText:!0,triggerSource:I.Dt.AVP_STREAM_SHUTTER,model:e,className:"view-cam__non-nude-shutter"}))}),(0,s._)(this,"onPlaying",()=>{R.s.clearMarks(),this.props.updatePlayerWasInPlayedState(!0)}),(0,s._)(this,"renderPlayer",()=>{let{isPlayerShuttered:e,isTheatreModeActive:t,shouldRenderPlayerOnBackground:i,isBlurVideoOnPrivate:a,model:s}=this.props,{lastSnapshotUrl:l}=this.state;if(e)return this.renderShutter();let n=i||a,o=n||t;return r.createElement(r.Fragment,null,!!s&&r.createElement(ea.s,null,r.createElement(aX,null)),r.createElement(e3,{updatePlayerResolution:this.props.updateViewCamBaseRealResolution,onPlaying:this.onPlaying,className:(0,L.AK)(n&&"view-cam_bg-player"),lastSnapshotUrl:o?void 0:l}))}),this.state={lastSnapshotUrl:void 0}}}let a9=(0,_.H)("isLayoutUpToL")((0,l.$j)((e,t)=>({aspectRatio:(0,ej.rr)(e),isVerticalStream:(0,ej.k_)(e),currentUserId:(0,eW.rc)(e),isPlayerShuttered:!(0,F.Wu)(e),isViewCamInfoVisible:!(0,b._8)(e,t.isLayoutUpToL),isCamAvailable:(0,eh._u)(e),isCurrentUserModelOrStudio:(0,te.ly)(e),isDocumentVisible:(0,x.PF)(e),isAppBotsEnabled:(0,c.N$r)(e).appBots,isInSpyMode:(0,h.Hn)(e),isInPrivate:(0,h.IW)(e),isInPersonal:(0,h.Ex)(e),isLoggedIn:(0,eW.Cg)(e),isNonNudeWL:(0,K.Km)(e),isMyStudioModel:(0,f.EP)(e),isNextModelAvailable:(0,eh.xr)(e),isModelInGroupShow:(0,h.Vf)(e),isOwnShow:(0,eh.$u)(e),isPrevModelAvailable:(0,eh.N5)(e),isPromoModel:(0,h.P1)(e),needVerifyAge:(0,W.m5)(e),isSocketReady:(0,F.F7)(e),model:(0,eh.T2)(e)||t.model,playerType:(0,u.Aq)(e),privateMode:(0,h.Zu)(e),shouldShadeLayout:(0,h.TE)(e),shouldRenderPlayer:(0,h.AO)(e),isUserFanClubActive:(0,h._I)(e),isWebRTCSupported:(0,u.XI)(e)(d.PLAYER_TYPES.WEBRTC),isTheatreModeActive:(0,H.z)(e),isViewCamDataReady:(0,eh.et)(e),isNonNudeCategoryEnabled:(0,G.Sk)(e),shouldRenderPlayerOnBackground:(0,h.qe)(e),isBackgroundVideoForAvpShutter:(0,h.tS)(e),isTicketShow:(0,h.Tn)(e),isBlurVideoOnPrivate:(0,u.$C)(e),isPrivateEndedNewSocketEventEnabled:(0,c.Y4E)(e),modelListSectionName:(0,D.TF)(e)}),a0)(a7))},79866:(e,t,i)=>{i.d(t,{Z:()=>s,x:()=>a});let a=({isPlasmaAvailable:e,isOfflinePrivateAvailable:t,i18n:{trans:i}})=>t&&e?i("viewCamStatuses.offline.requestPrivate.mobileBody"):t?i("viewCamStatuses.offline.requestPrivate.mobileBodyOnlyOfflineRequest"):e?i("viewCamStatuses.offline.requestPrivate.mobileBodyOnlyChatting"):"",s=e=>e.isOfflinePrivateAvailable&&(e.doPrivate||e.doP2p)},46672:(e,t,i)=>{i.d(t,{L:()=>E});var a=i(27378),s=i(57174),r=i(29413),l=i(91090),n=i(86811),o=i(97606),c=i(94380),d=i(95654),u=i(68020),m=i(27952),p=i(79561),h=i(29421);let v=e=>"number"!=typeof e?60:e<60?1:Math.floor(e/60),E=()=>{let{trans:e}=(0,o.QT)(),t=(0,d.C)(p.TN),i=(0,d.C)(u.AW),E=(0,d.C)(h.T2),g=(0,c.T)(),S=!!(E&&t);(0,n.GT)(S);let C=()=>{g((0,m.I)("SignUp",{action:{backgroundImage:E.avatarUrl||void 0,shouldBypassActionPrefix:!0,type:"continueWatching",user:E},amplParams:{triggerSource:l.Dt.WATCHING_LIMITATION}}))};return S?a.createElement("div",{className:"view-cam-watching-limit"},a.createElement("div",{className:"view-blocked-container"},a.createElement("div",{className:"watching-limit-title"},e("viewCam.watchingLimit.title")),a.createElement("div",{className:"watching-limit-description"},a.createElement("div",null,e("viewCam.watchingLimit.description",{limit:v(i)})),a.createElement("div",{className:"watching-limit-description-features"},e("viewCam.watchingLimit.youWillGet"))),a.createElement("div",{className:"watching-limit-features",onClick:C},a.createElement("div",{className:"watching-limit-feature"},a.createElement(r.Z,{img:"play-2",size:14}),e("viewCam.watchingLimit.features.watchForFree")),a.createElement("div",{className:"watching-limit-feature"},a.createElement(r.Z,{img:"chat",size:18}),e("viewCam.watchingLimit.features.publicChat")),a.createElement("div",{className:"watching-limit-feature"},a.createElement(r.Z,{img:"tokens-2",size:20}),e("viewCam.watchingLimit.features.tokenGiveaway")))),a.createElement(s.ZP,{style:"accept",size:"large",onClick:C},e("viewCam.watchingLimit.button"))):null}}}]);